!function(s){"use strict";Object.is||(Object.is=function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}),"function"!=typeof DataTransfer.prototype.setDragImage&&(DataTransfer.prototype.setDragImage=function(e,t,n){});var t,r=r||function(l){if(!(void 0===l||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=l.document,c=function(){return l.URL||l.webkitURL||l},s=e.createElementNS("http://www.w3.org/1999/xhtml","a"),u="download"in s,f=/constructor/i.test(l.HTMLElement),p=/CriOS\/[\d]+/.test(navigator.userAgent),d=function(e){(l.setImmediate||l.setTimeout)(function(){throw e},0)},h=function(e){setTimeout(function(){"string"==typeof e?c().revokeObjectURL(e):e.remove()},4e4)},m=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},i=function(e,n,t){t||(e=m(e));var i,r=this,o="application/octet-stream"===e.type,a=function(){!function(e,t,n){for(var i=(t=[].concat(t)).length;i--;){var r=e["on"+t[i]];if("function"==typeof r)try{r.call(e,n||e)}catch(e){d(e)}}}(r,"writestart progress write writeend".split(" "))};if(r.readyState=r.INIT,u)return i=c().createObjectURL(e),void setTimeout(function(){var e,t;s.href=i,s.download=n,e=s,t=new MouseEvent("click"),e.dispatchEvent(t),a(),h(i),r.readyState=r.DONE});!function(){if((p||o&&f)&&l.FileReader){var t=new FileReader;return t.onloadend=function(){var e=p?t.result:t.result.replace(/^data:[^;]*;/,"data:attachment/file;");l.open(e,"_blank")||(l.location.href=e),e=void 0,r.readyState=r.DONE,a()},t.readAsDataURL(e),r.readyState=r.INIT}i||(i=c().createObjectURL(e)),o?l.location.href=i:l.open(i,"_blank")||(l.location.href=i);r.readyState=r.DONE,a(),h(i)}()},t=i.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=m(e)),navigator.msSaveOrOpenBlob(e,t)}:(t.abort=function(){},t.readyState=t.INIT=0,t.WRITING=1,t.DONE=2,t.error=t.onwritestart=t.onprogress=t.onwrite=t.onabort=t.onerror=t.onwriteend=null,function(e,t,n){return new i(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=r:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define([],function(){return r}),function(e){var t;if("function"==typeof define&&define.amd&&(define(e),t=!0),"object"==typeof exports&&(module.exports=e(),t=!0),!t){var n=window.Cookies,i=window.Cookies=e();i.noConflict=function(){return window.Cookies=n,i}}}(function(){function l(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function s(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function e(c){function a(){}function n(e,t,n){if("undefined"!=typeof document){"number"==typeof(n=l({path:"/"},a.defaults,n)).expires&&(n.expires=new Date(1*new Date+864e5*n.expires)),n.expires=n.expires?n.expires.toUTCString():"";try{var i=JSON.stringify(t);/^[\{\[]/.test(i)&&(t=i)}catch(e){}t=c.write?c.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var r="";for(var o in n)n[o]&&(r+="; "+o,!0!==n[o]&&(r+="="+n[o].split(";")[0]));return document.cookie=e+"="+t+r}}function t(e,t){if("undefined"!=typeof document){for(var n={},i=document.cookie?document.cookie.split("; "):[],r=0;r<i.length;r++){var o=i[r].split("="),a=o.slice(1).join("=");t||'"'!==a.charAt(0)||(a=a.slice(1,-1));try{var l=s(o[0]);if(a=(c.read||c)(a,l)||s(a),t)try{a=JSON.parse(a)}catch(e){}if(n[l]=a,e===l)break}catch(e){}}return e?n[e]:n}}return a.set=n,a.get=function(e){return t(e,!1)},a.getJSON=function(e){return t(e,!0)},a.remove=function(e,t){n(e,"",l(t,{expires:-1}))},a.defaults={},a.withConverter=e,a}(function(){})}),s("#livepreviewpro-app-builder").length&&(t={alight:null,rootScope:null,wpFileFrameImage:null,wp_base_url:null,wp_upload_url:null,wp_plugin_url:null,wp_ajax_url:null,wp_ajax_nonce:null,wp_ajax_action_update:null,wp_ajax_action_get:null,wp_ajax_msg_error:null,wp_lite_msg_error:null,themes:null,pages:null,page:null,config:null,ui:{fullscreen:!1,sidebar:!0,sidebarWidth:300,sidebarResize:{initX:null,lastX:null,width:null},tabs:{general:!0,items:!1}},defaultConfig:{title:"LivePreview",logo:{url:null,href:null,blank:!0},theme:"main-top",page:null,productList:!0,responsiveDevices:!0,responsiveDevice:null,buyButton:!0,buyButtonText:"Buy Now!",closeIframe:!0,preload:!0,items:[]},defaultItem:{active:!0,id:null,title:null,thumb:{url:null},url:null,badge:null,tag:null,year:null,buy:null,preload:!0},fn:{init:function(t){t.fn.enableLoading(t);var e=s("#livepreviewpro-app-builder");e.removeAttr("style"),e.on("fullscreenchange mozfullscreenchange webkitfullscreenchange msfullscreenchange",s.proxy(t.fn.onFullScreenChange,this,t)),s(window).on("resize",s.proxy(t.fn.onResize,this,t)),t.plan=livepreviewpro_globals.plan,t.wp_base_url=livepreviewpro_globals.wp_base_url,t.wp_pages=livepreviewpro_globals.wp_pages,t.wp_upload_url=livepreviewpro_globals.upload_base_url,t.wp_plugin_url=livepreviewpro_globals.plugin_base_url,t.wp_ajax_url=livepreviewpro_globals.ajax_url,t.wp_ajax_nonce=livepreviewpro_globals.ajax_nonce,t.wp_ajax_action_update=livepreviewpro_globals.ajax_action_update,t.wp_ajax_action_get=livepreviewpro_globals.ajax_action_get,t.wp_ajax_msg_error=livepreviewpro_globals.ajax_msg_error,t.wp_lite_msg_error=livepreviewpro_globals.lite_msg_error;var n=s.extend(!0,{},t.defaultConfig,livepreviewpro_globals.config?JSON.parse(livepreviewpro_globals.config):null);t.config=n,t.rootScope.watch("appData.config.page",function(e){t.fn.onPage(t,e)}),t.fn.loadData(t,"themes").then(t.fn.loadData(t,"pages").done(function(e){t.pages=e.list,t.fn.onPage(t,t.config.page),t.rootScope.scan()})).done(function(e){t.themes=e.list,t.rootScope.scan()}).always(function(){t.fn.disableLoading(t)})},enableLoading:function(e){s("#livepreviewpro-app-builder").removeClass("livepreviewpro-active")},disableLoading:function(e){setTimeout(function(){s("#livepreviewpro-app-builder").addClass("livepreviewpro-active")},1e3)},loadData:function(i,e){var r=s.Deferred();return s.ajax({url:i.wp_ajax_url,type:"POST",dataType:"json",data:{nonce:i.wp_ajax_nonce,action:i.wp_ajax_action_get,type:e},success:function(e){e&&e.success?r.resolve(e.data):this.error()},error:function(e,t,n){i.fn.showNotice(i,i.wp_ajax_msg_error,"notice-error"),r.reject()}}),r.promise()},getPageDemoUrl:function(e,t){return e.page?t?-1!==e.page.url.indexOf("?")?e.page.url+"&product_id="+t:e.page.url+"?product_id="+t:e.page.url:""},onPage:function(e,t){if(e.page=null,e.pages)for(var n=0;n<e.pages.length;n++){var i=e.pages[n];if(i.id==t){e.page=i;break}}},onTab:function(e,t){if(!e.ui.tabs[t]){var n=e.ui.tabs;for(var i in n)n.hasOwnProperty(i)&&(n[i]=!1);e.ui.tabs[t]=!0}},onResize:function(e,t){},onFullScreenChange:function(e,t){document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement?(s("#livepreviewpro-app-builder").addClass("livepreviewpro-fullscreen"),e.ui.fullscreen=!0):(s("#livepreviewpro-app-builder").removeClass("livepreviewpro-fullscreen"),e.ui.fullscreen=!1),e.rootScope.scan()},toggleFullscreen:function(e){if(e.ui.fullscreen)try{document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}catch(e){console.error("The browser does not support the fullscreen API")}else try{var t=s("#livepreviewpro-app-builder").get(0);t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}catch(e){console.error("The browser does not support the fullscreen API")}},toggleSidebarPanel:function(e){e.ui.sidebar=!e.ui.sidebar,e.rootScope.scan()},onSidebarResizeStart:function(e,t){t.preventDefault(),t.stopPropagation(),e.ui.sidebarResize.initX=t.pageX,e.ui.sidebarResize.lastX=t.pageX,e.ui.sidebarResize.width=e.ui.sidebarWidth,s("body").on("mousemove",s.proxy(e.fn.onSidebarResize,this,e)),s("body").on("mouseup",s.proxy(e.fn.onSidebarResizeEnd,this,e)),s("body").on("mouseleave",s.proxy(e.fn.onSidebarResizeEnd,this,e))},onSidebarResize:function(e,t){t.preventDefault(),t.stopPropagation();var n=t.pageX-e.ui.sidebarResize.lastX;e.ui.sidebarResize.lastX=t.pageX,e.ui.sidebarResize.width+=n,200<=e.ui.sidebarResize.width&&e.ui.sidebarResize.width<=800&&(e.ui.sidebarWidth=e.ui.sidebarResize.width,e.rootScope.scan())},onSidebarResizeEnd:function(e,t){t.preventDefault(),t.stopPropagation(),s("body").off("mousemove",s.proxy(e.fn.onSidebarResize,this,e)),s("body").off("mouseup",s.proxy(e.fn.onSidebarResizeEnd,this,e)),s("body").off("mouseleave",s.proxy(e.fn.onSidebarResizeEnd,this,e)),e.ui.sidebarResize.initX=null,e.ui.sidebarResize.lastX=null,e.ui.sidebarResize.width=null},generateId:function(n,e,t){var i;function r(e){for(var t=0;t<n.config.items.length;t++)if(n.config.items[t].id==e)return!1;return!0}for(i=n.fn.uuid();!r(i);)i=n.fn.uuid();t.id=i,e.scan()},selectImage:function(n,i,r){n.wpFileFrameImage&&(n.wpFileFrameImage.detach(),n.wpFileFrameImage=null),n.wpFileFrameImage=wp.media.frames.file_frame=wp.media({library:{type:["image"]},multiple:!1}),n.wpFileFrameImage.on("select",function(e){var t=n.wpFileFrameImage.state().get("selection").first().toJSON().url;r.url=t,i.scan()}),n.wpFileFrameImage.open()},selectItem:function(e,t){e.ui.activeItem=t,e.rootScope.scan()},isItemActive:function(e,t){return Object.is(e.ui.activeItem,t)},onItemClick:function(e,t){e.fn.isItemActive(e,t)?e.ui.activeItem=null:e.fn.selectItem(e,t)},onItemKeyDown:function(e,t,n){switch(n.preventDefault(),n.keyCode){case 38:s(n.target).prev().focus().click();break;case 40:s(n.target).next().focus().click()}},addItem:function(e){if(3<=e.config.items.length&&"lite"==e.plan)e.fn.showNotice(e,e.wp_lite_msg_error,"notice-error");else{var t=s.extend(!0,{},e.defaultItem);t.id=e.fn.uuid(),e.config.items.push(t),e.fn.selectItem(e,t)}},copyItem:function(e){if(null!=e.ui.activeItem){for(var t=null,n=e.config.items.length,i=null,r=0;r<n;r++)if(i=e.config.items[r],Object.is(e.ui.activeItem,i)){t=r;break}null!=t&&((i=s.extend(!0,{},i)).title=(i.title?i.title:"")+" [copy]",e.config.items.splice(t+1,0,i),e.fn.selectItem(e,i))}},updownItem:function(e,t){if(null!=e.ui.activeItem){for(var n=null,i=e.config.items.length,r=null,o=0;o<i;o++)if(r=e.config.items[o],Object.is(e.ui.activeItem,r)){n=o;break}if(null!=n)if("up"==t&&0<n)e.config.items[n]=e.config.items[n-1],e.config.items[n-1]=r;else if("down"==t&&n<i-1)e.config.items[n]=e.config.items[n+1],e.config.items[n+1]=r;else if("start"==t&&0<n)for(o=n;0<o;o--)r=e.config.items[o],e.config.items[o]=e.config.items[o-1],e.config.items[o-1]=r;else if("end"==t&&n<i-1)for(o=n;o<i-1;o++)r=e.config.items[o],e.config.items[o]=e.config.items[o+1],e.config.items[o+1]=r}},deleteItem:function(e){if(null!=e.ui.activeItem){for(var t=null,n=e.config.items.length,i=0;i<n;i++){var r=e.config.items[i];if(Object.is(e.ui.activeItem,r)){t=i;break}}if(null!=t){var o=t;0<=t&&t<n&&(e.config.items.splice(t,1),t==n-1&&1<n?o=n-2:1==n&&(o=null)),e.fn.selectItem(e,e.config.items[o])}}},toggleItemActive:function(e,t){t.active=!t.active},preview:function(e,t){window.open(e.fn.getPageDemoUrl(e,t),"_blank")},saveConfig:function(t){t.fn.enableLoading(t);var e=s.extend(!0,{},t.config),n=JSON.stringify(e);s.ajax({url:t.wp_ajax_url,type:"POST",dataType:"json",data:{nonce:t.wp_ajax_nonce,action:t.wp_ajax_action_update,data:n}}).done(function(e){if(e)return t.fn.showNotice(t,e.data.msg,e.success?"notice-success":"notice-error"),void t.rootScope.scan();t.fn.showNotice(t,t.wp_ajax_msg_error,"notice-error")}).fail(function(){t.fn.showNotice(t,t.wp_ajax_msg_error,"notice-error")}).always(function(){t.fn.disableLoading(t)})},loadConfigFromJson:function(e,t){if(t){var n=JSON.parse(t);e.config=s.extend(!0,{},n),e.rootScope.scan()}},loadConfigFromFile:function(e){var t=s("#livepreviewpro-load-config-from-file").off("change");t.one("change",s.proxy(function(n,e){var t=e.target.files[0];if(e.target.value="",t){var i=new FileReader;i.onload=s.proxy(function(e){var t=e.target.result;n.fn.loadConfigFromJson(n,t)},this),i.readAsText(t)}},this,e)),t.click()},saveConfigToFile:function(e){var t=s.extend(!0,{},e.config),n=JSON.stringify(t),i=new File([n],"livepreviewpro_config.json",{type:"application/json;charset=utf-8"});r(i)},showNotice:function(e,t,n){var i=s("#livepreviewpro-messages"),r=s("<div></div>").addClass("notice is-dismissible").addClass(n),o=s("<p></p>").html(t),a=s("<button></button>").attr("type","button").addClass("notice-dismiss").html('<span class="screen-reader-text">Dismiss this notice.</span>');function l(){clearTimeout(r.data("timer")),r.fadeTo(100,0,function(){r.slideUp(100,function(){r.remove()})})}r.data("timer",setTimeout(l,5e3)),a.click(function(e){e.preventDefault(),l()}),r.append(o,a),i.append(r)},uuid:function(){return"xxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}},modal:{count:0,items:[],fn:{show:function(i,e,r,t){var o=++i.modal.count,a=s.Deferred();return i.modal.items.push(o),i.inprocess++,s.ajax({url:i.wp_ajax_url,type:"GET",dataType:"html",data:{nonce:i.wp_ajax_nonce,action:i.wp_ajax_action_modal,name:e}}).done(function(e){s("body").addClass("livepreviewpro-modal-open");var t=s(e),n={};n.modalData=r,n.modalData.id=o,n.modalData.deferred=a,n.modalData.appData=i,(null==r.easyClose||r.easyClose)&&t.on("click",function(e){n.modalData.deferred.resolve("close")}),t.find(".livepreviewpro-modal-dialog").on("click",function(e){return!1}),s("#livepreviewpro-modals").append(t),r.rootScope=i.alight(t.get(0),n)}).fail(function(e,t,n){i.fn.showNotice(i,i.wp_ajax_msg_error,"notice-error")}).always(function(){t&&"function"==typeof t&&t.call(this,r),i.inprocess--}),a.promise()},close:function(e,t){s("#livepreviewpro-modal-"+t).remove();var n=e.modal.items.indexOf(t);e.modal.items.splice(n,1),0==e.modal.items.length&&jQuery("body").removeClass("livepreviewpro-modal-open")}}}},window.alightInitCallback=function(e){delete window.alightInitCallback,e.directives.al.textid={restrict:"EA",link:function(r,e,o,a){var l=s(e),c=s(e);c.on("input change",function(e){var t,n=c.val(),i=!0;!(t=n)||/^\s*$/.test(t)?n=null:n.match("^[a-zA-Z0-9_-]+$")?n=n:i=!1,i?(a.setValue(o,n),a.scan(),function(){var e=l.data("callback");if(e){var t=a.changeDetector.compile(e);t(r)}}(),l.removeClass("livepreviewpro-invalid")):l.addClass("livepreviewpro-invalid")}),a.watch(o,function(e){null==e?c.val(null):c.val(e)},{readOnly:!0})}},e.directives.al.text={restrict:"EA",link:function(i,e,r,o){var a=s(e),l=s(e);l.on("input change",function(e){var t,n=l.val();(!(t=n)||/^\s*$/.test(t))&&(n=null),o.setValue(r,n),o.scan(),function(){var e=a.data("callback");if(e){var t=o.changeDetector.compile(e);t(i)}}()}),o.watch(r,function(e){null==e?l.val(null):l.val(e)},{readOnly:!0})}},e.directives.al.integer={restrict:"EA",link:function(r,e,o,a){var l=s(e),c=s(e);c.on("input change",function(e){var t,n=c.val(),i=!0;!(t=n)||/^\s*$/.test(t)?n=null:n.match("^([+-]?[1-9]+[0-9]*|0)$")?n=parseInt(n,10):i=!1,i?(a.setValue(o,n),a.scan(),function(){var e=l.data("callback");if(e){var t=a.changeDetector.compile(e);t(r)}}(),l.removeClass("livepreviewpro-invalid")):l.addClass("livepreviewpro-invalid")}),a.watch(o,function(e){l.removeClass("livepreviewpro-invalid"),null==e?c.val(null):c.val(e)},{readOnly:!0})}},e.directives.al.toggle={restrict:"EA",link:function(n,e,t,i){var r=s(e);r.addClass("livepreviewpro-toggle").html("&nbsp;"),r.on("mousedown touchstart",function(e){i.setValue(t,!i.getValue(t)),i.scan(),function(){var e=r.data("callback");if(e){var t=i.changeDetector.compile(e);t(n)}}()}),i.watch(t,function(e){e?r.addClass("livepreviewpro-checked").removeClass("livepreviewpro-unchecked"):r.removeClass("livepreviewpro-checked").addClass("livepreviewpro-unchecked")},{readOnly:!0})}},e.directives.al.checkbox={restrict:"EA",link:function(n,e,t,i){var r=s(e);r.addClass("livepreviewpro-checkbox").html('<i class="fa fa-check"></i>'),r.on("mousedown touchstart",function(e){i.setValue(t,!i.getValue(t)),i.scan(),function(){var e=r.data("callback");if(e){var t=i.changeDetector.compile(e);t(n)}}()}),i.watch(t,function(e){e?r.addClass("livepreviewpro-checked").removeClass("livepreviewpro-unchecked"):r.removeClass("livepreviewpro-checked").addClass("livepreviewpro-unchecked")},{readOnly:!0})}},e.directives.al.style={restrict:"EA",link:function(e,t,n,i){if(i.attrArgument){var r=s(t),o=i.attrArgument.split(".")[0];i.watch(n,function(e){r.css(o,e)},{readOnly:!0})}}},e.directives.al.devices={restrict:"EA",link:function(e,t,n,i){var r=s(t),o=s("<select/>").addClass(r.get(0).className);o.append('<option value="none">none</option>'),o.append('<option value="desktop">Desktop</option>'),o.append('<option value="tabletlandscape">Tablet Landscape (1024x768)</option>'),o.append('<option value="tabletportrait">Tablet Portrait (768x1024)</option>'),o.append('<option value="mobilelandscape">Mobile Landscape (480x320)</option>'),o.append('<option value="mobileportrait">Mobile Portrait (320x480)</option>'),r.append(o),o.unwrap(),o.on("change",function(e){var t=o.val();"none"==t&&(t=null),i.setValue(n,t),i.scan()}),i.watch(n,function(e){null==e?o.val("none"):o.val(e)},{readOnly:!0})}},t.config=s.extend(!0,{},t.defaultConfig),t.alight=e,t.rootScope=t.alight(document.querySelectorAll("#livepreviewpro-app-builder")[0],{appData:t}),t.fn.init(t)});var n=s(".livepreviewpro-page-info");n.length&&!Cookies.get("livepreviewpro-page-info-hidden")&&n.addClass("livepreviewpro-active").find(".livepreviewpro-page-info-close").on("click",function(e){n.removeClass("livepreviewpro-active"),Cookies.set("livepreviewpro-page-info-hidden",!0,{expires:365})}),function(){function e(){var W=function(e,t){return W.bootstrap(e,t)};W.version="0.14.0",W.filters={},W.text={},W.core={},W.utils={},W.option={globalController:!1,removeAttribute:!0,domOptimization:!0,domOptimizationRemoveEmpty:!0,fastBinding:!0},W.debug={scan:0,directive:!1,watch:!1,watchText:!1,parser:!1},W.ctrl=W.controllers={},W.d=W.directives={al:{},bo:{},$global:{}},W.hooks={directive:[],binding:[]},W.priority={al:{app:2e3,checked:20,class:30,css:30,focused:20,if:700,ifnot:700,model:25,radio:25,repeat:1e3,select:20,stop:-10,value:20,on:10},$component:5,$attribute:-5};var e,t,n,i,r,u,b,o,a,y,B,s,d,x,f,l,k,c,_,N,O,p,h,j,m,I,F,v,g,w,D,C,$,E,S,A,T,L,R,M,z,V,H,K,U,P,q,X,J,G,Q,Z,Y,ee,te,ne,ie,re,oe,ae,le,ce,se,ue=W.f$={},fe=function(e,t){var n=e.indexOf(t);0<=n?e.splice(n,1):console.warn("trying to remove not exist item")};function pe(t,e){var n,i=[],r=!1,o=e.cd,a=e.callback;if(e.filterConf.args.length){var l=[];e.filterConf.args.forEach(function(e,t){var n=o.watch(e,function(e){i[t+1]=e,s()});n.$.isStatic||l.push(n)});var c=!1,s=function(){c||(c=!0,o.watch("$onScanOnce",function(){if(c=!1,r){var e=t.apply(null,i);ue.isPromise(e)?e.then(function(e){a(e),o.scan()}):a(e)}}))};l.length&&(n=function(){l.forEach(function(e){return e.stop()})})}else s=function(){var e=t(i[0]);ue.isPromise(e)?e.then(function(e){a(e),o.scan()}):a(e)};return{onChange:function(e){r=!0,i[0]=e,s()},onStop:n,watchMode:e.watchMode}}function de(e,t,n,i){i.setValue(i.attrArgument,t)}return ue.before=function(e,t){e.parentNode.insertBefore(t,e)},ue.after=function(e,t){var n=e.parentNode,i=e.nextSibling;i?n.insertBefore(t,i):n.appendChild(t)},ue.remove=function(e){var t=e.parentNode;t&&t.removeChild(e)},ue.on=function(e,t,n){e.addEventListener(t,n,!1)},ue.off=function(e,t,n){e.removeEventListener(t,n,!1)},ue.isFunction=function(e){return e&&"[object Function]"===Object.prototype.toString.call(e)},ue.isObject=function(e){return e&&"[object Object]"===Object.prototype.toString.call(e)},ue.isPromise=function(e){return e&&window.Promise&&e instanceof window.Promise},ue.isElement=function(e){return e instanceof HTMLElement},ue.addClass=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},ue.removeClass=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^| )"+t.split(" ").join("|")+"( |$)","gi")," ")},ue.rawAjax=function(e){var t=new XMLHttpRequest;for(var n in t.open(e.type||"GET",e.url,!0,e.username,e.password),e.headers)t.setRequestHeader(n,e.headers[n]);e.success&&(t.onload=function(){200<=t.status&&t.status<400?e.success(t.responseText):e.error&&e.error()}),e.error&&(t.onerror=e.error),t.send(e.data||null)},ue.ajaxCache={},ue.ajax=function(e){if(e.username||e.password||e.headers||e.data||!e.cache)return ue.rawAjax(e);var t=e.type||"GET",n=t+":"+e.url,i=ue.ajaxCache[n];i||(ue.ajaxCache[n]=i={callback:[]}),i.result?e.success&&e.success(i.result):(i.callback.push(e),i.loading||(i.loading=!0,ue.rawAjax({type:t,url:e.url,success:function(e){i.loading=!1,i.result=e;for(var t=0;t<i.callback.length;t++)i.callback[t].success&&i.callback[t].success(e);i.callback.length=0},error:function(){i.loading=!1;for(var e=0;e<i.callback.length;e++)i.callback[e].error&&i.callback[e].error();i.callback.length=0}})))},e='@charset "UTF-8";[al-cloak],[hidden],.al-hide{display:none !important;}',t=document.querySelectorAll("head")[0],(n=document.createElement("style")).setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n),ue.ready=(r=!(i=[]),ue.on(document,"DOMContentLoaded",function e(){r=!0,ue.off(document,"DOMContentLoaded",e);for(var t=0;t<i.length;t++)i[t]();i.length=0}),function(e){r?e():i.push(e)}),window.jQuery&&(window.jQuery.fn.alight=function(e){var n=[];if(this.each(function(e,t){return n.push(t)}),n.length)return W(n,e)}),W.core.getFilter=function(e,t){var n=t.locals[e];if(n&&(ue.isFunction(n)||n.init||n.fn))return n;if(n=W.filters[e])return n;throw"Filter not found: "+e},W.core.buildFilterNode=function(e,t,n,i){if(ue.isFunction(n))return pe(n,{cd:e,filterConf:t,callback:i});if(n.init)return n.init.call(e,e.scope,t.raw,{setValue:i,conf:t,changeDetector:e});if(ue.isFunction(n.fn))return pe(n.fn,{cd:e,filterConf:t,callback:i,watchMode:n.watchMode});throw"Wrong filter: "+t.name},W.ChangeDetector=function(e){var t,n;return n=new o,t=new u(n,e||{}),n.topCD=t},(o=function(){return this.watchers={any:[],finishBinding:[],finishScan:[],finishScanOnce:[],onScanOnce:[]},this.status=null,this.extraLoop=!1,this.finishBinding_lock=!1,this.lateScan=!1,this.topCD=null,this}).prototype.destroy=function(){if(this.watchers.any.length=0,this.watchers.finishBinding.length=0,this.watchers.finishScan.length=0,this.watchers.finishScanOnce.length=0,this.watchers.onScanOnce.length=0,this.topCD)return this.topCD.destroy()},(u=function(e,t){this.scope=t,this.locals=t,this.root=e,this.watchList=[],this.destroy_callbacks=[],this.parent=null,this.children=[],this.rwatchers={any:[],finishScan:[],elEvents:[]}}).prototype.new=function(e,t){var n,i,r;return t=t||{},r=this,null==e&&(e=r.scope),(i=new u(r.root,e)).parent=r,e===r.scope&&(t.locals?((n=r._ChildLocals)||(r._ChildLocals=n=function(){return this.$$root=e,this},n.prototype=r.locals),i.locals=new n):i.locals=r.locals),r.children.push(i),i},u.prototype.destroy=function(){var e,t,n,i,r,o,a,l,c,s,u,f,p,d,h,m,v,g,w,b,y,x,k;for(x=(e=this).root,e.scope=null,e.parent&&fe(e.parent.children,e),i=0,a=(m=e.destroy_callbacks).length;i<a;i++)(0,m[i])();for(r=0,l=(v=e.children.slice()).length;r<l;r++)v[r].destroy();for(o=e.destroy_callbacks.length=0,c=(g=e.watchList).length;o<c;o++)(t=g[o]).onStop&&t.onStop();for(p=e.watchList.length=0,s=(w=e.rwatchers.any).length;p<s;p++)k=w[p],fe(x.watchers.any,k);for(d=e.rwatchers.any.length=0,u=(b=e.rwatchers.finishScan).length;d<u;d++)k=b[d],fe(x.watchers.finishScan,k);for(h=e.rwatchers.finishScan.length=0,f=(y=this.rwatchers.elEvents).length;h<f;h++)n=y[h],ue.off(n[0],n[1],n[2]);this.rwatchers.elEvents.length=0,x.topCD===e&&(x.topCD=null,x.destroy())},a=function(e){return this.cb=e},l=function(e,t,n){var i,r;return i=e.root,r=new a(n),e.rwatchers[t].push(r),i.watchers[t].push(r),{stop:function(){return fe(e.rwatchers[t],r),fe(i.watchers[t],r)}}},u.prototype.on=function(e,t,n){return ue.on(e,t,n),this.rwatchers.elEvents.push([e,t,n])},d={$any:function(e,t){return l(e,"any",t)},$finishScan:function(e,t){return l(e,"finishScan",t)},$finishScanOnce:function(e,t){e.root.watchers.finishScanOnce.push(t)},$onScanOnce:function(e,t){e.root.watchers.onScanOnce.push(t)},$destroy:function(e,t){e.destroy_callbacks.push(t)},$finishBinding:function(e,t){e.root.watchers.finishBinding.push(t)}},k=function(){},u.prototype.watch=function(n,t,e){var i,r,o,a,l,c,s,u,f,p;if(l=d[n])return l(this,t);if(!0===(e=e||{})&&(e={isArray:!0}),e.init&&console.warn("watch.init is depricated"),(i=this).root,p=i.scope,ue.isFunction(n)?(a=n,u=W.utils.getId(),c=!0):(c=!1,a=null,"::"===(n=n.trim()).slice(0,2)&&(n=n.slice(2),e.oneTime=!0),u=n,u=e.deep?"d#"+u:e.isArray?"a#"+u:"v#"+u),W.debug.watch&&console.log("$watch",n),s=!1,!c)if(e.watchText)a=e.watchText.fn;else{if((r=W.utils.compile.expression(n)).filter)return function(t,e,n,i){var r=null,o=i.oneTime;if(i.isArray?r="array":i.deep&&(r="deep"),!n){var a={el:i.element,ea:i.elementAttr};n=function(e){B(t.scope,a,e)}}for(var l=W.utils.parsFilter(e.filter),c=[],s=l.result.length-1;0<=s;s--){var u=W.core.getFilter(l.result[s].name,t),f=W.core.buildFilterNode(t,l.result[s],u,n);f.watchMode&&(r=f.watchMode),f.onStop&&c.push(f.onStop),n=f.onChange}return i={oneTime:o},"array"===r?i.isArray=!0:"deep"===r&&(i.deep=!0),c.length&&(i.onStop=function(){c.forEach(function(e){return e()}),c.length=0}),t.watch(e.expression,n,i)}(i,r,t,e);s=r.isSimple&&0===r.simpleVariables.length,a=r.fn}return e.deep&&(e.isArray=!1),o={isStatic:s,isArray:Boolean(e.isArray),extraLoop:!e.readOnly,deep:!0===e.deep?10:e.deep,value:k,callback:t,exp:a,src:""+n,onStop:e.onStop||null,el:e.element||null,ea:e.elementAttr||null},s?i.watch("$onScanOnce",function(){return B(p,o,o.exp(p))}):i.watchList.push(o),f={$:o,stop:function(){var t;if(e.onStop)try{e.onStop()}catch(e){t=e,W.exceptionHandler(t,"Error in onStop of watcher: "+n,n)}if(!o.isStatic)return fe(i.watchList,o)},refresh:function(){var e;return(e=o.exp(i.locals))&&o.deep?o.value=W.utils.clone(e,o.deep):e&&o.isArray?o.value=e.slice():o.value=e}},e.oneTime&&(o.callback=function(e){if(void 0!==e)return f.stop(),t(e)}),f},u.prototype.watchGroup=function(e,t){var n,i,r,o,a,l;if(n=this,!t&&ue.isFunction(e)&&(t=e,e=null),l=!1,i=function(){if(!l)return l=!0,n.watch("$onScanOnce",function(){return l=!1,t()})},e)for(r=0,a=e.length;r<a;r++)o=e[r],n.watch(o,i);return i},s=window.performance?function(){return Math.floor(performance.now())}:function(){return(new Date).getTime()},x=function(e,t){var n,i,r,o;if(null===e||null===t)return!0;if((o=typeof e)!==typeof t)return!0;if("object"===o){if(e.length!==t.length)return!0;for(n=i=0,r=e.length;i<r;n=++i)if(e[n]!==t[n])return!0}return!1},B=function(e,t,n){t.el?t.ea?t.el.setAttribute(t.ea,n):t.el.nodeValue=n:t.callback.call(e,n)},y=function(e,t,n,i){var r,o;return r={src:n.src,scope:t.scope,locals:t.locals},n.el&&(r.element=n.el),o=1===i?"$scan, error in callback: ":"$scan, error in expression: ",W.exceptionHandler(e,o+n.src,r)},b=function(){},f=function(e,t){var n,i,r,o,a,l,c,s,u,f,p,d,h,m,v,g,w;if(e.root,l=!1,v=o=0,e){for(h=[],c=0,r=e;r;){for(p=r.locals,v+=r.watchList.length,s=0,f=(m=r.watchList.slice()).length;s<f;s++){u=(w=m[s]).value;try{g=w.exp(p)}catch(e){a=e,g=b}if(u!==g){if(d=!1,w.isArray?(n=Array.isArray(u))===(i=Array.isArray(g))?n?x(u,g)&&(d=!0,w.value=g.slice()):(d=!0,w.value=g):(d=!0,w.value=i?g.slice():g):w.deep?W.utils.equal(u,g,w.deep)||(d=!0,w.value=W.utils.clone(g,w.deep)):(d=!0,w.value=g),d)if(d=!1,g===b)y(a,r,w);else{o++;try{w.el?w.ea?null!=g?w.el.setAttribute(w.ea,g):w.el.removeAttribute(w.ea):w.el.nodeValue=g:(u===k&&(u=void 0),"$scanNoChanges"!==w.callback.call(r.scope,g,u)&&w.extraLoop&&(l=!0))}catch(e){y(a=e,r,w,1)}}1<W.debug.scan&&console.log("changed:",w.src)}}h.push.apply(h,r.children),r=h[c++]}t.total=v,t.changes=o,t.extraLoop=l}},u.prototype.digest=function(){var e,t,n,i,r,o,a,l,c;for(a=this.root,i=10,c=0,W.debug.scan&&(l=s()),o={total:0,changes:0,extraLoop:!1,src:"",scope:null,element:null};i;){if(i--,a.extraLoop=!1,a.watchers.onScanOnce.length)for(r=a.watchers.onScanOnce.slice(),t=a.watchers.onScanOnce.length=0,n=r.length;t<n;t++)r[t].call(a);if(f(this,o),c+=o.changes,!o.extraLoop&&!a.extraLoop&&!a.watchers.onScanOnce.length)break}return W.debug.scan&&(e=s()-l,console.log("$scan: loops: ("+(10-i)+"), last-loop changes: "+o.changes+", watches: "+o.total+" / "+e+"ms")),o.mainLoop=i,o.totalChanges=c,o},u.prototype.scan=function(e){var t,n,i,r,o,a,l,c,s,u,f;if(f=this.root,e=e||{},!W.option.zone||e.zone){if(ue.isFunction(e)&&(e={callback:e}),e.callback&&f.watchers.finishScanOnce.push(e.callback),e.late){if(f.lateScan)return;return f.lateScan=!0,void W.nextTick(function(){if(f.lateScan)return f.topCD.scan()})}if("scaning"!==f.status){if(f.lateScan=!1,f.status="scaning",(u=f.topCD?f.topCD.digest():{}).totalChanges)for(n=0,o=(c=f.watchers.any).length;n<o;n++)(0,c[n])();for(f.status=null,i=0,a=(s=f.watchers.finishScan).length;i<a;i++)(0,s[i])();for(t=f.watchers.finishScanOnce.slice(),r=f.watchers.finishScanOnce.length=0,l=t.length;r<l;r++)t[r].call(f);if(0===u.mainLoop)throw"Infinity loop detected";return u}f.extraLoop=!0}},(W.core.ChangeDetector=u).prototype.compile=function(e,t){return W.utils.compile.expression(e,t).fn},u.prototype.setValue=function(t,n){var i,r,o,a,l,c,s,u,f,p;o=(i=this).compile(t+" = $value",{input:["$value"],no_return:!0});try{return o(i.locals,n)}catch(e){if(r=e,u="can't set variable: "+t,W.debug.parser&&console.warn(u),0<=(""+r).indexOf("TypeError")&&(p=t.match(/^([\w\d\.]+)\.[\w\d]+$/))&&p[1]){for(s=i.locals,a=0,c=(f=p[1].split(".")).length;a<c;a++)void 0===s[l=f[a]]&&(s[l]={}),s=s[l];try{return void o(i.locals,n)}catch(e){}}return W.exceptionHandler(r,u,{name:t,value:n})}},u.prototype.eval=function(e){return this.compile(e)(this.locals)},u.prototype.getValue=function(e){return this.eval(e)},W.text.$base=function(t){var e,n,i,r,o;if(r=t.point,!(n=(o=(e=t.cd).scope).$ns&&o.$ns.text?o.$ns.text[t.name]:W.text[t.name]))throw"No directive alight.text."+t.name;return i={changeDetector:e,setter:function(e){if(t.update)return r.value=null===e?"":""+e,t.update()},setterRaw:function(e){if(t.updateRaw)return r.value=null===e?"":""+e,t.updateRaw()},finally:function(e){if(t.finally)return r.value=null===e?"":""+e,r.type="text",t.finally(),t.update=null,t.finally=null}},n.call(e,i.setter,t.exp,o,i)},c=function(e,t,n){var i,r,o,a,l,c,s,u,f,p,d,h,m,v,g,w,b,y,x,k,_,D,C,$,E,S,A,T,N;if(n=n||{},r=this,W.debug.watchText&&console.log("$watchText",e),$=W.utils.compile.buildSimpleText(e,null))r.watch(e,t,{watchText:$,element:n.element,elementAttr:n.elementAttr});else{for(l=W.utils.parsText(e),_=!(i=!(T=0)),s=u=c=function(){},m=0,w=l.length;m<w;m++)if("expression"===(a=l[m]).type)if(x=(f=a.list.join("|")).match(/^([^\w\d\s\$"'\(\u0410-\u044F\u0401\u0451]+)/))a.isDir=!0,k=x[1],f="#"===k?(h=f.indexOf(" "))<0?(k=f.substring(1),""):(k=f.slice(1,h),f.slice(h)):f.substring(k.length),W.text.$base({name:k,exp:f,cd:r,point:a,update:function(){return s()},updateRaw:function(){return u()},finally:function(){return s(),c()}}),_=!0,"text"!==a.type&&(i=!1);else if((o=W.utils.compile.expression(f,{string:!0})).filter)T++,i=!1,a.watched=!0,function(t){r.watch(f,function(e){return null==e&&(e=""),t.value=e,s()})}(a);else{if(a.fn=o.fn,!o.rawExpression)throw"Error";o.isSimple&&0===o.simpleVariables.length?(a.type="text",a.value=a.fn()):(a.re=o.rawExpression,T++)}if(i){if(T)return $=_?W.utils.compile.buildSimpleText(null,l):W.utils.compile.buildSimpleText(e,l),void r.watch(e,t,{watchText:{fn:$.fn},element:n.element,elementAttr:n.elementAttr});for(S="",v=0,b=l.length;v<b;v++)a=l[v],S+=a.value;r.watch("$onScanOnce",function(){return B(r.scope,{callback:t,el:n.element,ea:n.elementAttr},S)})}else if(N={callback:t,el:n.element,ea:n.elementAttr},l.scope=r.scope,d=W.utils.compile.buildText(e,l),u=function(){return B(r.scope,N,d())},T){for(A=null,C="",s=function(){C=d()},c=function(){var e,t;for(h=!0,e=0,t=l.length;e<t;e++)if("expression"===(a=l[e]).type){h=!1;break}h&&(r.watch("$finishScanOnce",function(){return A.stop()}),n.onStatic&&n.onStatic())},D=function(){return C},g=0,y=l.length;g<y;g++)if("expression"===(a=l[g]).type){if(a.isDir||a.watched)continue;a.watched=!0,function(t,e){r.watch(e,function(e){return null==e&&(e=""),t.value=e,s()})}(a,a.list.join(" | "))}s(),A=r.watch(D,t,{element:n.element,elementAttr:n.elementAttr})}else E=!1,p=function(){return E=!1,u()},(s=function(){if(!E)return E=!0,r.watch("$onScanOnce",p)})()}},u.prototype.watchText=c,_={TR:1,TD:1,LI:1},W.utils.optmizeElement=function(e,t){var n,i,r,o,a,l,c,s,u,f,p,d,h,m,v,g,w,b,y;if(1===e.nodeType){for(t=t||!W.option.domOptimizationRemoveEmpty,"PRE"===e.nodeName&&(t=!0),!(o=e.firstChild)||3!==o.nodeType||o.nodeValue.trim()||t||(ue.remove(o),o=e.firstChild),v=!1;o;)h=o.nextSibling,!v||3!==o.nodeType||o.nodeValue.trim()||t?(v=1===o.nodeType&&_[o.nodeName],W.utils.optmizeElement(o,t)):ue.remove(o),o=h;!(o=e.lastChild)||3!==o.nodeType||o.nodeValue.trim()||t||ue.remove(o)}else if(3===e.nodeType){if(b=e.data,p=W.utils.pars_start_tag,(l=b.indexOf(p))<0)return;if(b.slice(l+p.length).indexOf(p)<0)return;for(m="t",w=[n={value:""}],c=0,u=(r=W.utils.parsText(b)).length;c<u;c++)"text"===(i=r[c]).type?n.value+=i.value:(a=i.list.join("|"),y=W.utils.pars_start_tag+a+W.utils.pars_finish_tag,a.match(/^([^\w\d\s\$"'\(\u0410-\u044F\u0401\u0451]+)/)?("t"===m||"d"===m?n.value+=y:(n={value:y},w.push(n)),m="d"):1===i.list.length?("t"===m||"v"===m?n.value+=y:(n={value:y},w.push(n)),m="v"):"t"===m?n.value+=y:(n={value:y},w.push(n)));if(w.length<2)return;for((o=e).data=w[0].value,s=0,f=(g=w.slice(1)).length;s<f;s++)i=g[s],d=document.createTextNode(i.value),ue.after(o,d),o=d}},W.hooks.attribute=v=[],v.push({code:"dataPrefix",fn:function(){"data-"===this.attrName.slice(0,5)&&(this.attrName=this.attrName.slice(5))}}),v.push({code:"colonNameSpace",fn:function(){var e,t;this.directive||this.name||((t=(e=(t=this.attrName.match(/^(\w+)[\-\:](.+)$/))?(this.ns=t[1],t[2]):(this.ns="$global",this.attrName)).match(/^([^\.]+)\.(.*)$/))&&(e=t[1],this.attrArgument=t[2]),this.name=e.replace(/(-\w)/g,function(e){return e.substring(1).toUpperCase()}))}}),v.push({code:"getGlobalDirective",fn:function(){var e;if(!this.directive){if(!(e=W.d[this.ns]))return this.result="noNS",void(this.stop=!0);this.directive=e[this.name],this.directive||("$global"===this.ns?this.result="noNS":this.result="noDirective",this.stop=!0)}}}),v.push({code:"cloneDirective",fn:function(){var e,t,n,i,r,o;if(r=this.directive,i=this.ns,n=this.name,e={},ue.isFunction(r))e.init=r;else{if(!ue.isObject(r))throw"Wrong directive: "+i+"."+n;for(t in r)o=r[t],e[t]=o}if(e.priority=r.priority||W.priority[i]&&W.priority[i][n]||0,e.restrict=r.restrict||"A",e.restrict.indexOf(this.attrType)<0)throw"Directive has wrong binding (attribute/element): "+n;this.directive=e}}),v.push({code:"preprocessor",fn:function(){var a,l,c;c=this.ns,l=this.name,(a=this.directive).$init=function(e,t,n,i){var r,o;if(o={element:t,value:n,cd:e,env:i,ns:c,name:l,doBinding:(r=function(){var e,t,n,i;for(e=t=0,i=(n=o.procLine).length;t<i;e=++t)if(n[e].fn.call(o),o.isDeferred){o.procLine=n.slice(e+1);break}return o.async=!0,null},!1),directive:a,isDeferred:!1,procLine:W.hooks.directive,makeDeferred:function(){return o.isDeferred=!0,o.doBinding=!0,o.retStopBinding=!0,o.async=!1,function(){if(o.isDeferred=!1,o.async)return r()}}},a.stopBinding&&(i.stopBinding=!0),r(),o.retStopBinding)return"stopBinding"}}}),(g=W.hooks.directive).push({code:"init",fn:function(){var e;this.directive.init&&(W.debug.directive&&this.directive.scope&&console.warn(this.ns+"-"+this.name+" uses scope and init together, probably you need use link instead of init"),this.env.changeDetector=this.cd,(e=this.directive.init.call(this.env,this.cd.scope,this.element,this.value,this.env))&&e.start&&e.start())}}),g.push({code:"templateUrl",fn:function(){var t,n;(n=this).directive.templateUrl&&(t=this.makeDeferred(),ue.ajax({cache:!0,url:this.directive.templateUrl,success:function(e){return n.directive.template=e,t()},error:t}))}}),g.push({code:"template",fn:function(){var e;this.directive.template&&(1===this.element.nodeType?this.element.innerHTML=this.directive.template:8===this.element.nodeType&&((e=document.createElement("p")).innerHTML=this.directive.template.trim(),e=e.firstChild,ue.after(this.element,e),this.element=e,this.doBinding=!0))}}),g.push({code:"scope",fn:function(){var e,t;if(this.directive.scope){switch(t=this.cd,this.directive.scope){case!0:e=t.new({$parent:t.scope});break;case"root":e=W.ChangeDetector({$parent:t.scope}),t.watch("$destroy",function(){return e.destroy()});break;default:throw"Wrong scope value: "+this.directive.scope}this.env.parentChangeDetector=t,this.cd=e,this.doBinding=!0,this.retStopBinding=!0}}}),g.push({code:"link",fn:function(){var e;this.directive.link&&(this.env.changeDetector=this.cd,(e=this.directive.link.call(this.env,this.cd.scope,this.element,this.value,this.env))&&e.start&&e.start())}}),g.push({code:"scopeBinding",fn:function(){this.doBinding&&!this.env.stopBinding&&W.bind(this.cd,this.element,{skip_attr:this.env.skippedAttr()})}}),w=function(e,t,n){var i;"A"===t.attr_type?((i=n||{}).priority=W.priority.$attribute,i.is_attr=!0,i.name=e,i.attrName=e,i.element=t.element,t.list.push(i)):"M"===t.attr_type&&t.list.push(n)},F=function(e,t){var n,i,r,o;if(0<=t.skip_attr.indexOf(e))return w(e,t,{skip:!0});for(n={attrName:e,attrType:t.attr_type,element:t.element,cd:t.cd,result:null},i=0,r=(o=W.hooks.attribute).length;i<r&&(o[i].fn.call(n),!n.stop);i++);if("noNS"!==n.result)return"noDirective"===n.result?"E"===t.attr_type?void t.list.push({name:e,priority:-10,attrName:e,noDirective:!0}):void w(e,t,{noDirective:!0}):void t.list.push({name:e,directive:n.directive,priority:n.directive.priority,attrName:e,attrArgument:n.attrArgument});w(e,t)},I=function(e,t){return e.priority===t.priority?0:e.priority>t.priority?-1:1},O=function(e,t,n,i){var r;if(!((r=n).indexOf(W.utils.pars_start_tag)<0))return e.watchText(r,null,{element:t,elementAttr:i}),!0},m=function(e,t,n){var i;if(!((i=t.data).indexOf(W.utils.pars_start_tag)<0))return e.watchText(i,null,{element:t}),i},p=function(t,n,e){var i,r,o,a,l,c,s,u,f,p;if("directive:"===(f=n.nodeValue.trim()).slice(0,10)){if(p=0<=(s=(f=f.slice(10).trim()).indexOf(" "))?(o=f.slice(0,+(s-1)+1||9e9),f.slice(s+1)):(o=f,""),i={list:u=[],element:n,attr_type:"M",cd:t,skip_attr:[]},F(o,i),(r=u[0]).noDirective)throw"Comment directive not found: "+o;a=r.directive,c=new N({element:n,attrName:r.attrName,attributes:u}),W.debug.directive&&console.log("bind",r.attrName,p,r);try{a.$init(t,n,p,c)}catch(e){l=e,W.exceptionHandler(l,"Error in directive: "+r.name,{value:p,env:c,cd:t,scope:t.scope,element:n})}return c.skipToElement?{directive:1,skipToElement:c.skipToElement}:{directive:1,skipToElement:null}}},(N=function(e){var t,n;for(t in e)n=e[t],this[t]=n;return this}).prototype.takeAttr=function(e,t){var n,i,r,o;for(1===arguments.length&&(t=!0),i=0,r=(o=this.attributes).length;i<r;i++)if((n=o[i]).attrName===e)return t&&(n.skip=!0),this.element.getAttribute(e)||!0},N.prototype.skippedAttr=function(){var e,t,n,i,r;for(r=[],t=0,n=(i=this.attributes).length;t<n;t++)(e=i[t]).skip&&r.push(e.attrName);return r},N.prototype.scan=function(e){return this.changeDetector.scan(e)},N.prototype.on=function(e,t,n){return this.changeDetector.on(e,t,n)},N.prototype.watch=function(e,t,n){return this.changeDetector.watch(e,t,n)},N.prototype.watchGroup=function(e,t){return this.changeDetector.watchGroup(e,t)},N.prototype.watchText=function(e,t,n){return this.changeDetector.watchText(e,t,n)},N.prototype.getValue=function(e){return this.changeDetector.getValue(e)},N.prototype.setValue=function(e,t){return this.changeDetector.setValue(e,t)},N.prototype.eval=function(e){return this.changeDetector.eval(e)},N.prototype.new=function(e,t){return!0===t?t={locals:!0}:!0===e&&null==t&&(t={locals:!(e=null)}),this.changeDetector.new(e,t)},N.prototype.bind=function(e,t,n){var i,r,o,a,l,c,s;for(this.stopBinding=!0,l=o=0,c=arguments.length;l<c;l++)(i=arguments[l])instanceof u&&(r=i,o+=1),ue.isElement(i)&&(a=i,o+=1);return(s=arguments[o])||(s={skip:this.skippedAttr()}),a||(a=this.element),r||(r=this.changeDetector),W.bind(r,a,s)},h=function(t,r,e){var n,i,o,a,l,c,s,u,f,p,d,h,m,v,g,w,b,y,x,k,_,D,C,$,E,S,A,T;if(a={directive:0,hook:0,skipToElement:null,fb:m={attr:[],dir:[],children:[]}},E=!1,A=(e=e||{}).skip_attr,!0===e.skip?e.skip_top=!0:A||(A=e.skip||[]),A instanceof Array||(A=[A]),!e.skip_top){for(n={list:x=[],element:r,skip_attr:A,attr_type:"E",cd:t},o=r.nodeName.toLowerCase(),F(o,n),"script"!==o&&"style"!==o||(E=!0),n.attr_type="A",g=0,w=(C=r.attributes).length;g<w;g++)i=C[g],F(i.name,n);if(e.attachDirective)for(o in $=e.attachDirective)$[o],F(o,n);for(k=0,b=(x=x.sort(I)).length;k<b;k++)if(!(u=x[k]).skip){if(u.noDirective)throw"Directive not found: "+u.name;if(u.skip=!0,T=e.attachDirective&&e.attachDirective[u.attrName]?e.attachDirective[u.attrName]:r.getAttribute(u.attrName),u.is_attr)O(t,r,T,u.attrName)&&m.attr.push({attrName:u.attrName,value:T});else{f=u.directive,d=new N({element:r,attrName:u.attrName,attrArgument:u.attrArgument||null,attributes:x,stopBinding:!1,elementCanBeRemoved:e.elementCanBeRemoved,fbElement:e.fbElement}),W.debug.directive&&console.log("bind",u.attrName,T,u);try{"stopBinding"===f.$init(t,r,T,d)&&(E=!0)}catch(e){p=e,W.exceptionHandler(p,"Error in directive: "+u.attrName,{value:T,env:d,cd:t,scope:t.scope,element:r})}if(d.fastBinding?(h=ue.isFunction(d.fastBinding)?d.fastBinding:f.init,m.dir.push({fb:h,attrName:u.attrName,value:T,attrArgument:d.attrArgument,fbData:d.fbData})):a.directive++,d.stopBinding){E=!0;break}d.skipToElement&&(a.skipToElement=d.skipToElement)}}}if(!E)for(S=null,v=_=0,y=(c=function(){var e,t,n,i;for(i=[],t=0,e=(n=r.childNodes).length;t<e;t++)l=n[t],i.push(l);return i}()).length;_<y;v=++_)(l=c[v])&&(S?S===l&&(S=null):(e.fbElement&&(s={fbElement:e.fbElement.childNodes[v]}),D=j(t,l,s),a.directive+=D.directive,a.hook+=D.hook,S=D.skipToElement,D.fb&&(D.fb.text||D.fb.attr&&D.fb.attr.length||D.fb.dir&&D.fb.dir.length||D.fb.children&&D.fb.children.length)&&m.children.push({index:v,fb:D.fb})));return a},j=function(e,t,n){var i,r,o,a,l,c,s;if(c={directive:0,hook:0,skipToElement:null,fb:null},W.hooks.binding.length)for(r=0,o=(l=W.hooks.binding).length;r<o;r++)if(i=l[r],c.hook+=1,(a=i.fn(e,t,n))&&a.owner)return c;return 1===t.nodeType?(a=h(e,t,n),c.directive+=a.directive,c.hook+=a.hook,c.skipToElement=a.skipToElement,c.fb=a.fb):3===t.nodeType?(s=m(e,t))&&(c.fb={text:s}):8===t.nodeType&&(a=p(e,t))&&(c.directive+=a.directive,c.skipToElement=a.skipToElement),c},W.nextTick=($=null,C=[],D=function(){var t,e,n,i,r,o,a;for($=null,e=C.slice(),r=C.length=0,o=e.length;r<o;r++){t=(i=e[r])[0],a=i[1];try{t.call(a)}catch(e){n=e,W.exceptionHandler(n,"$nextTick, error in function",{fn:t,self:a})}}return null},function(e){if(C.push([e,this]),!$)return $=setTimeout(D,0)}),W.bind=function(e,t,n){var i,r,o,a,l,c;if(!e)throw"No changeDetector";if(!t)throw"No element";if(n=n||{},W.option.domOptimization&&!n.noDomOptimization&&W.utils.optmizeElement(t),(i=!(c=e.root).finishBinding_lock)&&(c.finishBinding_lock=!0,c.bindingResult={directive:0,hook:0}),l=j(e,t,n),c.bindingResult.directive+=l.directive,c.bindingResult.hook+=l.hook,e.digest(),i){for(c.finishBinding_lock=!1,a=c.watchers.finishBinding.slice(),r=c.watchers.finishBinding.length=0,o=a.length;r<o;r++)(0,a[r])();l.total=c.bindingResult}return l},function(){function l(e,t,n,i,r,o){i.callback.apply(null,o);var a=t._properties.root;a&&a.topCD&&a.topCD.scan({zone:!0})}var c=W.bind;W.bind=function(e,t,n){var i=e.root,r=W.option.zone;if(r){var o=!0===r?Zone:r,a=i.zone;if(a||(i.zone=a=o.current.fork({name:o.current.name+".x",properties:{root:i},onInvokeTask:l})),o.current!==a)return i.zone.run(c,null,[e,t,n])}return c(e,t,n)}}(),W.bootstrap=function(e,t){if(!e)return W.bootstrap("[al-app]"),W.bootstrap("[al\\:app]"),void W.bootstrap("[data-al-app]");var n;if(e instanceof W.core.ChangeDetector)n=e,e=t;else if(t instanceof W.core.ChangeDetector)n=t;else if(ue.isFunction(t)){var i={};n=W.ChangeDetector(i),t.call(n,i)}else t&&(n=W.ChangeDetector(t));if(Array.isArray(e)){for(var r=void 0,o=0,a=e;o<a.length;o++){var l=a[o];r=W.bootstrap(l,n)}return r}if("string"==typeof e){r=void 0;for(var c=0,s=document.querySelectorAll(e);c<s.length;c++){var u=s[c];r=W.bootstrap(u,n)}return r}if(n||(n=W.ChangeDetector()),ue.isElement(e)){for(var f,p,d,h=0,m=["al-app","al:app","data-al-app"];h<m.length&&(f=m[h],p=e.getAttribute(f),e.removeAttribute(f),!p);h++);return p&&(d={skip_attr:[f],attachDirective:{}},W.d.al.ctrl?d.attachDirective["al-ctrl"]=p:d.attachDirective[p+"!"]=""),W.bind(n,e,d),n}W.exceptionHandler("Error in bootstrap","Error input arguments",{input:e})},W.utils.getId=(T=function(){var e,t,n,i,r;for(r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),n=Math.floor((new Date).valueOf()/1e3)-1388512800,i="";0<n;)t=n-62*(e=Math.floor(n/62)),n=e,i=r[t]+i;return i}(),A=1,function(){return T+"#"+A++}),W.utils.clone=E=function(i,r){var o,e,t,n;if(null==r&&(r=128),r<1)return null;if(!i)return i;if("object"!=typeof i)return i;if(i instanceof Array)return t=function(){var e,t,n;for(n=[],e=0,t=i.length;e<t;e++)o=i[e],n.push(E(o,r-1));return n}();if(i instanceof Date)return new Date(i.valueOf());if(i.nodeType&&"function"==typeof i.cloneNode)return i;for(e in t={},i)n=i[e],"$"!==e[0]&&(t[e]=E(n,r-1));return t},W.utils.equal=S=function(e,t,n){var i,r,o,a,l,c,s;if(null==n&&(n=128),n<1)return!0;if(!e||!t)return e===t;if((c=typeof e)!==typeof t)return!1;if("object"!==c)return e===t;if(e instanceof Array){if(e.length!==t.length)return!1;for(i=r=0,a=e.length;r<a;i=++r)if(s=e[i],!S(s,t[i],n-1))return!1;return!0}if(e instanceof Date)return e.valueOf()===t.valueOf();if(e.nodeType&&"function"==typeof e.cloneNode)return e===t;for(o in l={},e)if(s=e[o],"$"!==o[0]&&(l[o]=!0,!S(s,t[o],n-1)))return!1;for(o in t)if(s=t[o],"$"!==o[0]&&!l[o]&&!S(s,e[o],n-1))return!1;return!0},W.exceptionHandler=function(e,t,n){var i;return i=[],t&&i.push(t),e&&e.message&&i.push(e.message),n&&i.push(n),e&&i.push(e.stack?e.stack:e),console.error.apply(console,i)},V=(H=function(){var e,t,n;for(n={},e=0,t=arguments.length;e<t;e++)n[arguments[e]]=!0;return n})("instanceof","typeof","in","null","true","false","undefined","return"),K=/[a-zA-Z\u0410-\u044F\u0401\u0451_\.\$]/,R=function(e){return e.match(K)},M=function(e){return 48<=e.charCodeAt()&&e.charCodeAt()<=57},U=H("+","-",">","<","=","&","|","^","!","~"),z=function(e){return U[e]||!1},L=H("=","+=","-=","++","--","|=","^=","&=","!=","<<=",">>="),W.utils.parsExpression=function(e,t){var h,m,n,f,v,k,g,w,p,_;return v=H.apply(null,(t=t||{}).input||[]),_=1,n=(k=function(e){var t,n,i,r,o,a,l,c,s,u,f,p,d,h,m,v,g,w,b,y,x;for(d=e.line,h=e.result||[],u=e.index||0,p=e.level||0,g=e.stopKey||null,v=!(x=[]),s=b=w=l=m=y="",r=0,c=f=null,a=function(){return s&&h.push({type:"free",value:s}),s=""};u<=d.length;)if(i=d[u-1],t=d[u++]||"",n=d[u],(v&&s||!t)&&a(),"string"!==v){if("key"===v){if(R(t)||M(t)){y+=t;continue}if("["===t){if(y+=t,!(o=k({line:d,index:u,level:p+1,stopKey:"]"})).stopKeyOk)throw"Error expression";u=o.index,y+="###"+o.uniq+"###]",x.push(o);continue}if("?"===t&&("."===n||"("===n||"["===n)){y+=t;continue}if("("===t){if(y+=t,!(o=k({line:d,index:u,level:p+1,stopKey:")"})).stopKeyOk)throw"Error expression";u=o.index,y+="###"+o.uniq+"###)",x.push(o);continue}f={type:"key",value:y,start:u-y.length-1,finish:u-1,children:x},h.push(f),y=v="",x=[]}else if("sign"===v){if(z(t)){m+=t;continue}if("|"===m&&0===p&&0===r){c=d.substring(u-1),u=d.length+1;continue}(L[m]||"="===m[0]&&"="!==m[1])&&(f.assignment=!0),h.push({type:"sign",value:m}),m=v=""}else if("digit"===v){if(M(t)||"."===t){l+=t;continue}h.push({type:"digit",value:l}),l=""}if(R(t))v="key",y+=t;else if(z(t))v="sign",m+=t;else if(M(t))v="digit",l+=t;else if('"'!==t&&"'"!==t){if(t===g)return a(),{result:h,index:u,stopKeyOk:!0,uniq:_++};"("===t&&r++,")"===t&&r--,"{"!==t?(":"===t&&"}"===g&&(f.type="free"),s+=t):(a(),o=k({line:d,index:u,level:p+1,stopKey:"}"}),h.push({type:"{}",child:o}),u=o.index)}else v="string",b+=w=t}else{if(t===w&&"\\"!==i){b+=t,h.push({type:"string",value:b}),v=w=b="";continue}b+=t}return a(),{result:h,index:u,filter:c}})({line:e}),g={isSimple:!n.filter,simpleVariables:[]},n.filter?(g.expression=e.substring(0,e.length-n.filter.length-1),g.filter=n.filter):g.expression=e,w=function(e){var t;return{count:(t=e.split(/[\.\[\(\?]/)).length,firstPart:t[0]}},p=function(e,t){return t?"($$="+e+",$$==null)?undefined:":"($$=$$"+e+",$$==null)?undefined:"},f=function(e){return e.split(/[\.\[\(\?]/)[0]},m=function(e){var t,n,i,r,o,a,l,c,s,u;if("this"===e)return"$$scope";if(t=f(e),r=V[t]||v[t],"this"===t&&(e="$$scope"+e.slice(4),r=!0),1===(c=e.split("?")).length)return r?e:"$$scope."+e;for(n=r?(u=p(c[0],!0),c[0]):(u=p("scope."+c[0]),"scope."+c[0]),i=0,a=(s=c.slice(1,c.length-1)).length;i<a;i++)"("===(l=s[i])[0]?u+=p(n+l,r):(u+=p(l),n+=l);return"("===(o=c[c.length-1])[0]?(r||(u+="$$"),u+=n+o):u+="$$"+o,"("+u+")"},h=function(e){var t,n,i,r,o,a,l,c,s,u,f,p,d;for(p="",r=0,l=(u=e.result).length;r<l;r++)if("key"!==(i=u[r]).type)"{}"!==i.type?p+=i.value:p+="{"+h(i.child)+"}";else{if(i.assignment?(s="this"===(d=w(i.value)).firstPart?"$$scope"+i.value.substring(4):v[d.firstPart]?i.value:d.count<2?"($$scope.$$root || $$scope)."+i.value:"$$scope."+i.value,g.isSimple=!1):V[i.value]?s=i.value:(s=m(i.value),g.simpleVariables.push(s)),i.children.length)for(o=0,c=(f=i.children).length;o<c;o++)a="###"+(t=f[o]).uniq+"###",n=h(t),s=s.split(a).join(n);p+=s}return p},g.result=h(n),W.debug.parser&&console.log(e,g),g},W.utils.parsFilter=function(e){var t,n,i;for(i=[],e=e.trim();e;){if(!(t=e.match(/^(\w+)([^\w])(.*)$/))){if(!(t=e.match(/^(\w+)$/)))return null;i.push({name:t[1],args:[],raw:""});break}e="|"===t[2]?(i.push({name:t[1],args:[],raw:""}),t[3]):(n=W.utils.parsArguments(t[3],{stop:"|"}),i.push({name:t[1],args:n.result,raw:t[3].slice(0,n.length)}),t[3].slice(n.length+1).trim())}return{result:i}},W.utils.parsArguments=function(e,t){var n,i,r,o,a,l,c,s;for(t=t||{},i="",o=a=0,s=c=!(r=[]),l=function(){i&&(r.push(i),i="")};a<=e.length;)if(n=e[a]||"",a++,c)i+=n,'"'===n&&(c=!1);else if(s)i+=n,"'"===n&&(s=!1);else if('"'!==n)if("'"!==n)if(o)i+=n,"("===n&&o++,")"===n&&o--;else if(" "!==n&&","!==n){if(t.stop&&t.stop===n){l();break}"("===n&&(o=1),i+=n}else l();else i+=n,s=!0;else i+=n,c=!0;return l(),{result:r,length:a-1}},W.utils.pars_start_tag="{{",W.utils.pars_finish_tag="}}",X=function(a){var l,c,s,u,n,f,p,r;return r=W.utils.pars_start_tag,l=W.utils.pars_finish_tag,f=[],n=s=0,c=function(e){var t;return e=e||1,t=a.substring(n,s-e),n=s,t},p=null,u=function(e,t,n){var i,r,o;for(e||(p={type:"expression",list:[]},f.push(p)),i=null;s<a.length;){if(r=i+(i=a[s]),o=a[s+=1],i===t)return;if(!n){if(r===l&&0===e)return p.list.push(c(2)),!0;"("===i?u(e+1,")"):"{"===i?u(e+1,"}"):'"'===i?u(e+1,'"',!0):"'"===i?u(e+1,"'",!0):"|"===i&&0===e&&("|"===o?s+=1:p.list.push(c()))}}},function(){var e,t,n,i;for(e=t=null;s<a.length;)if(t=e,e=a[s],s+=1,t+e===r){if((i=c(2))&&f.push({type:"text",value:i}),!u(0))throw"Wrong expression"+a;e=null}if(n=c(-1))f.push({type:"text",value:n})}(),W.debug.parser&&console.log("parsText",f),f},P={},q=function(i){var r,o;return function(){var e,t,n;for(n=[],e=0,t=i.length;e<t;e++)r=i[e],o={type:r.type,value:r.value},r.list&&(o.list=r.list.slice()),n.push(o);return n}()},W.utils.parsText=function(e){var t;return(t=P[e])||(P[e]=t=X(e)),q(t)},W.utils.compile=J={},J.cache={},J.Function=Function,J.expression=function(t,n){var e,i,r,o,a,l,c;if(n=n||{},l=(t=t.trim())+"#",l+=n.no_return?"+":"-",l+=n.string?"s":"v",n.input&&(l+=n.input.join(",")),a=J.cache[l])return a;r=(a=W.utils.parsExpression(t,{input:n.input})).result,n.no_return?c="var $$;"+r:n.string&&!a.filter?(c="var $$, __ = ("+r+"); return '' + (__ || (__ == null?'':__))",a.rawExpression="(__="+r+") || (__ == null?'':__)"):c="var $$;return ("+r+")";try{o=n.input?((e=n.input.slice()).unshift("$$scope"),e.push(c),J.Function.apply(null,e)):J.Function("$$scope",c)}catch(e){throw i=e,W.exceptionHandler(i,"Wrong expression: "+t,{src:t,cfg:n}),"Wrong expression: "+r}return a.fn=o,J.cache[l]=a},J.cacheText={},J.buildText=function(e,t){var n,i,r,o,a,l,c;if(r=J.cacheText[e])return function(){return r.call(t)};for(c=[],a=o=0,l=t.length;o<l;a=++o)"expression"===(n=t[a]).type?n.fn?c.push("this["+a+"].fn(this.scope)"):c.push("((x=this["+a+"].value) || (x == null?'':x))"):n.value&&(i=n.value.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n"),c.push('"'+i+'"'));return c=c.join(" + "),r=J.Function("var x; return ("+c+")"),J.cacheText[e]=r,function(){return r.call(t)}},J.cacheSimpleText={},J.buildSimpleText=function(e,t){var n,i,r,o,a,l,c,s;if((a=e?J.cacheSimpleText[e]:null)||!t)return a||null;for(c=[],s=[],o=r=0,l=t.length;r<l;o=++r)"expression"===(n=t[o]).type?(c.push("("+n.re+")"),n.simpleVariables&&s.push.apply(s,n.simpleVariables)):n.value&&(i=n.value.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n"),c.push('"'+i+'"'));return c=c.join(" + "),a={fn:J.Function("$$scope","var $$, __; return ("+c+")"),simpleVariables:s},e&&(J.cacheSimpleText[e]=a),a},Z=function(e){var t,n,i;if(!e.length)return"el";for(i="el",t=0,n=e.length;t<n;t++)i+=".childNodes["+e[t]+"]";return i},Q=function(e){var t,n,i,r,o,a;for(r=0,a=(i=W.utils.parsText(e)).length;r<a;r++)if("expression"===(n=i[r]).type){if(1<n.list.length)return null;if("#"===(o=n.list[0])[0])return null;if("="===o[0])return null;if("::"===o.slice(0,2))return null;if(!(t=W.utils.compile.expression(o,{string:!0})).rawExpression)throw"Error";n.re=t.rawExpression}return W.utils.compile.buildSimpleText(e,i).fn},W.core.fastBinding=function(e){if(W.option.fastBinding&&!e.directive&&!e.hook&&e.fb)return new G(e)},(G=function(e){var w,b,y,x;return y=[],(b=this).fastWatchFn=[],w=[],(x=function(e,t){var n,i,r,o,a,l,c,s,u,f,p,d,h,m,v,g;if(e.dir)for(m=Z(w),o=0,s=(p=e.dir).length;o<s;o++)n=p[o],y.push("s.dir("+b.fastWatchFn.length+", "+m+");"),b.fastWatchFn.push(n);if(e.attr)for(a=0,u=(d=e.attr).length;a<u;a++)g=(r=d[a]).value,l=r.attrName,m=Z(w),i=Q(g),v=g.replace(/"/g,'\\"').replace(/\n/g,"\\n"),i?(y.push('s.fw("'+v+'", '+b.fastWatchFn.length+", "+m+', "'+l+'");'),b.fastWatchFn.push(i)):y.push("s.wt('"+v+"', "+m+", '"+l+"');");if(e.text&&(m=Z(w),i=Q(e.text),v=e.text.replace(/"/g,'\\"').replace(/\n/g,"\\n"),i?(y.push('s.fw("'+v+'", '+b.fastWatchFn.length+", "+m+");"),b.fastWatchFn.push(i)):y.push('s.wt("'+v+'", '+m+");")),e.children)for(c=0,f=(h=e.children).length;c<f;c++)r=h[c],w.length=t+1,w[t]=r.index,x(r.fb,t+1)})(e.fb,0),y=y.join("\n"),b.resultFn=W.utils.compile.Function("s","el","f$",y),this}).prototype.bind=function(e,t){this.currentCD=e,this.resultFn(this,t,ue)},G.prototype.dir=function(e,t){var n,i,r,o;i=this.fastWatchFn[e],n=this.currentCD,r=new N({attrName:i.attrName,attrArgument:i.attrArgument,changeDetector:n,fbData:i.fbData}),(o=i.fb.call(r,n.scope,t,i.value,r))&&o.start&&o.start()},G.prototype.fw=function(e,t,n,i){var r,o,a,l;r=this.currentCD,l={isStatic:!1,isArray:!1,extraLoop:!1,deep:!1,value:a=(o=this.fastWatchFn[t])(r.locals),callback:null,exp:o,src:e,onStop:null,el:n,ea:i||null},r.watchList.push(l),B(r.scope,l,a)},G.prototype.wt=function(e,t,n){this.currentCD.watchText(e,null,{element:t,elementAttr:n})},W.hooks.attribute.unshift({code:"events",fn:function(){var e;(e=this.attrName.match(/^\@([\w\.\-]+)$/))&&(this.ns="al",this.name="on",this.attrArgument=e[1])}}),W.hooks.eventModifier={},(ae=function(e,n){return W.hooks.eventModifier[e]={event:["keydown","keypress","keyup"],fn:function(e,t){e[n]||(t.stop=!0)}}})("alt","altKey"),ae("control","ctrlKey"),ae("ctrl","ctrlKey"),ae("meta","metaKey"),ae("shift","shiftKey"),W.hooks.eventModifier.self=function(e,t){if(e.target!==t.element)return t.stop=!0},W.hooks.eventModifier.once={beforeExec:function(e,t){return t.unbind()}},te=function(e,t){var n,i,r,o,a,l;if(l={},"string"==typeof e?l.event=e:"object"==typeof e&&e.event&&(l.event=e.event),"string"==typeof l.event&&(l.event=l.event.split(/\s+/)),t&&l.event){for(r=!1,i=0,o=(a=l.event).length;i<o;i++)if(n=a[i],0<=t.indexOf(n)){r=!0;break}if(!r)return null}return ue.isFunction(e)?l.fn=e:e.fn&&(l.fn=e.fn),e.beforeExec&&(l.beforeExec=e.beforeExec),e.init&&(l.init=e.init),l},W.d.al.on=function(e,t,n,i){var u,r;i.attrArgument&&(W.option.removeAttribute&&(t.removeAttribute(i.attrName),i.fbElement&&i.fbElement.removeAttribute(i.attrName)),r=i.attrArgument.split(".")[0],(u=function(){}).prototype=oe(i.attrArgument,Y[r]),n&&(u.prototype.fn=i.changeDetector.compile(n,{no_return:!0,input:["$event","$element","$value"]})),u.prototype.expression=n,i.fastBinding=function(e,i,t,n){var r,o,a,l,c,s;for((a=new u).scope=e,a.element=i,a.cd=n.changeDetector,r=function(e){return ie(a,e)},l=0,c=(s=a.eventList).length;l<c;l++)o=s[l],ue.on(i,o,r);a.initFn&&a.initFn(e,i,t,n),a.unbind=function(){var e,t,n;for(e=0,t=(n=a.eventList).length;e<t;e++)o=n[e],ue.off(i,o,r)},n.changeDetector.watch("$destroy",a.unbind)},i.fastBinding(e,t,n,i))},re={enter:13,tab:9,delete:46,backspace:8,esc:27,space:32,up:38,down:40,left:37,right:39},Y={click:{stop:!0,prevent:!0},dblclick:{stop:!0,prevent:!0},submit:{stop:!0,prevent:!0},keyup:{filterByKey:!0},keypress:{filterByKey:!0},keydown:{filterByKey:!0}},oe=function(e,t){var n,i,r,o,a,l,c,s,u;for(i={attrArgument:e,throttle:null,throttleTime:0,debounce:null,debounceId:null,initFn:null,eventList:null,stop:(t=t||{}).stop||!1,prevent:t.prevent||!1,scan:!0,modifiers:[]},r=(n=e.split("."))[0],o=null,(s=W.hooks.eventModifier[r])&&(s=te(s)).event&&(i.eventList=s.event,s.fn&&i.modifiers.push(s),s.init&&(i.initFn=s.init)),i.eventList||(i.eventList=[r]),a=0,c=(u=n.slice(1)).length;a<c;a++)"stop"!==(l=u[a])?"prevent"!==l?"nostop"!==l?"noprevent"!==l?"noscan"!==l?"throttle-"!==l.substring(0,9)?"debounce-"!==l.substring(0,9)?(s=W.hooks.eventModifier[l])?(s=te(s,i.eventList))&&i.modifiers.push(s):t.filterByKey&&(null===o&&(o={}),re[l]&&(l=re[l]),o[l]=!0):i.debounce=Number(l.substring(9)):i.throttle=Number(l.substring(9)):i.scan=!1:i.prevent=!1:i.stop=!1:i.prevent=!0:i.stop=!0;return i.filterByKey=o,i},ne=function(e,t){var n;return"checkbox"===(n=e.element).type?n.checked:"radio"===n.type?n.value||n.checked:t.component?t.value:n.value},ee=function(t,n){var i,e,r,o,a;for(e=0,r=(a=t.modifiers).length;e<r;e++)(o=a[e]).beforeExec&&o.beforeExec(n,t);if(t.fn)try{t.fn(t.cd.locals,n,t.element,ne(t,n))}catch(e){i=e,W.exceptionHandler(i,"Error in event: "+t.attrArgument+" = "+t.expression,{attr:t.attrArgument,exp:t.expression,scope:t.scope,cd:t.cd,element:t.element,event:n})}t.scan&&t.cd.scan()},ie=function(e,t){var n,i,r,o,a,l;if(!e.filterByKey||e.filterByKey[t.keyCode]){if(e.modifiers.length)for((n=function(){}).prototype=e,(i=new n).stop=!1,r=0,o=(l=e.modifiers).length;r<o;r++)if((a=l[r]).fn&&(a.fn(t,i),i.stop))return;e.prevent&&t.preventDefault(),e.stop&&t.stopPropagation(),e.debounce?(e.debounceId&&clearTimeout(e.debounceId),e.debounceId=setTimeout(function(){return e.debounceId=null,ee(e,t)},e.debounce)):e.throttle?e.throttleTime<Date.now()&&(e.throttleTime=Date.now()+e.throttle,ee(e,t)):ee(e,t)}},W.hooks.attribute.unshift({code:"directDirective",fn:function(){var e=this.attrName.match(/^(.*)\!$/);if(e){var t=e[1].replace(/(-\w)/g,function(e){return e.substring(1).toUpperCase()}),c=this.cd.locals[t]||W.ctrl[t]||W.option.globalController&&window[t];ue.isFunction(c)?this.directive=function(e,t,n,i){var r=i.changeDetector;if(n){for(var o=W.utils.parsArguments(n),a=Array(o.result.length),l=0;l<o.result.length;l++)a[l]=W.utils.compile.expression(o.result[l],{input:["$element","$env"]}).fn(r.locals,t,i);c.apply(r,a)}else c.call(r,e,t,n,i)}:(this.result="noDirective",this.stop=!0)}}}),W.hooks.attribute.unshift({code:"elementVariable",fn:function(){var e=this.attrName.match(/^#([\w\.]*)$/);e&&(this.directive=de,this.attrArgument=e[1])}}),W.d.al.value=function(e,t,n,i){var r,o;return i.fastBinding=!0,r=function(){i.setValue(n,t.value),o.refresh(),i.scan()},i.on(t,"input",r),i.on(t,"change",r),o=i.watch(n,function(e){return null==e&&(e=""),t.value=e,"$scanNoChanges"})},W.d.al.checked=function(e,n,t,i){var r=i.fbData={opt:{},watch:[]};function o(e){var t=i.takeAttr(e);return W.option.removeAttribute&&(n.removeAttribute(e),i.fbElement&&i.fbElement.removeAttribute(e)),t}function a(e,t){var n=o(t);if(n)return r.opt[e]=n,!0;var i=o(":"+t)||o("al-attr."+t);return i?(r.watch.push([i,e]),!0):void 0}function c(n,i,r){for(var e in i.fbData.opt)n[e]=i.fbData.opt[e];for(var t=function(e){var t=e[1];i.watch(e[0],function(e){n[t]=e,r()})},o=0,a=i.fbData.watch;o<a.length;o++){t(a[o])}}a("value","value")?i.fastBinding=function(e,t,n,i){var r,o=null;function a(){return t.checked=o&&0<=o.indexOf(l.value),"$scanNoChanges"}var l={};c(l,i,a),r=i.watch(n,function(e){o=e,Array.isArray(o)||(o=null),a()},{isArray:!0}),i.on(t,"change",function(){if(o||(o=[],i.setValue(n,o)),t.checked)o.indexOf(l.value)<0&&o.push(l.value);else{var e=o.indexOf(l.value);0<=e&&o.splice(e,1)}r.refresh(),i.scan()})}:(a("true","true-value"),a("false","false-value"),i.fastBinding=function(e,t,n,i){var r,o,a={true:!0,false:!1};function l(){return t.checked=r===a.true,"$scanNoChanges"}c(a,i,l),o=i.watch(n,function(e){r=e,l()}),i.on(t,"change",function(){r=t.checked?a.true:a.false,i.setValue(n,r),o.refresh(),i.scan()})}),i.fastBinding(e,n,t,i)},W.d.al.if=function(e,t,n,i){var r;return i.elementCanBeRemoved?(W.exceptionHandler(null,i.attrName+" can't control element because of "+i.elementCanBeRemoved,{scope:e,element:t,value:n,env:i}),{}):(i.stopBinding=!0,r={item:null,childCD:null,base_element:null,top_element:null,start:function(){r.prepare(),r.watchModel()},prepare:function(){r.base_element=t,r.top_element=document.createComment(" "+i.attrName+": "+n+" "),ue.before(t,r.top_element),ue.remove(t)},updateDom:function(e){e?r.insertBlock(e):r.removeBlock()},removeBlock:function(){r.childCD&&(r.childCD.destroy(),r.childCD=null,r.removeDom(r.item),r.item=null)},insertBlock:function(){r.childCD||(r.item=r.base_element.cloneNode(!0),r.insertDom(r.top_element,r.item),r.childCD=i.changeDetector.new(),W.bind(r.childCD,r.item,{skip_attr:i.skippedAttr(),elementCanBeRemoved:i.attrName}))},watchModel:function(){i.watch(n,r.updateDom)},removeDom:function(e){ue.remove(e)},insertDom:function(e,t){ue.after(e,t)}})},W.d.al.ifnot=function(e,t,n,i){var r;return(r=W.d.al.if(e,t,n,i)).updateDom=function(e){e?r.removeBlock():r.insertBlock()},r},W.directives.al.repeat={restrict:"AM",init:function(e,C,o,P){var l,q;return P.elementCanBeRemoved?(W.exceptionHandler(null,P.attrName+" can't control element because of "+P.elementCanBeRemoved,{scope:e,element:C,value:o,env:P}),{}):(P.stopBinding=!0,l=P.changeDetector,q={start:function(){q.parsExpression(),q.prepareDom(),q.buildUpdateDom(),q.watchModel()},parsExpression:function(){var e,t;if("("===(t=o.trim())[0])if(q.objectMode=!0,e=t.match(/\((\w+),\s*(\w+)\)\s+in\s+(.+)\s+orderBy:(.+)\s*$/))q.objectKey=e[1],q.objectValue=e[2],q.expression=e[3]+" | toArray:"+q.objectKey+","+q.objectValue+" | orderBy:"+e[4],q.nameOfKey="$item",q.trackExpression="$item."+q.objectKey;else{if(!(e=t.match(/\((\w+),\s*(\w+)\)\s+in\s+(.+)\s*$/)))throw"Wrong repeat: "+o;q.objectKey=e[1],q.objectValue=e[2],q.expression=e[3]+" | toArray:"+q.objectKey+","+q.objectValue,q.nameOfKey="$item",q.trackExpression="$item."+q.objectKey}else{if((e=t.match(/(.*) track by ([\w\.\$\(\)]+)/))&&(q.trackExpression=e[2],t=e[1]),!(e=t.match(/\s*(\w+)\s+in\s+(.+)/)))throw"Wrong repeat: "+o;q.nameOfKey=e[1],q.expression=e[2]}},watchModel:function(){var e;e=q.objectMode?{deep:!0}:{isArray:!0},q.watch=l.watch(q.expression,q.updateDom,e)},prepareDom:function(){var e,t,n,i,r;if(8===C.nodeType){for(q.top_element=C,q.element_list=t=[],e=C.nextSibling;e;){if(8===e.nodeType&&"/directive:"===(r=e.nodeValue.trim().split(/\s+/))[0]&&"al-repeat"===r[1]){P.skipToElement=e;break}t.push(e),e=e.nextSibling}for(n=0,i=t.length;n<i;n++)e=t[n],ue.remove(e)}else q.base_element=C,q.top_element=document.createComment(" "+o+" "),ue.before(C,q.top_element),ue.remove(C),W.option.removeAttribute&&C.removeAttribute(P.attrName)},makeChild:function(e,t,n){var i;return i=l.new(null,{locals:!0}),q.updateLocals(i,e,t,n),i},updateLocals:function(e,t,n,i){var r;r=e.locals,q.objectMode?(r[q.objectKey]=t[q.objectKey],r[q.objectValue]=t[q.objectValue]):r[q.nameOfKey]=t,r.$index=n,r.$first=0===n,r.$last=n===i.length-1},rawUpdateDom:function(e,t){var n,i,r,o,a,l;for(i=0,a=e.length;i<a;i++)n=e[i],ue.remove(n);for(o=0,l=t.length;o<l;o++)r=t[o],ue.after(r.after,r.element)},buildUpdateDom:function(){return q.updateDom=(K=[],_=null,D=M=0,U=P.skippedAttr(),H="$index"===q.trackExpression?(a={},V=function(e){return a[M]||null},z=function(e){null!=e.$id&&delete a[e.$id]},function(e,t){t.$id=M,a[M]=t}):q.trackExpression?(a={},n=l.compile(q.trackExpression,{input:["$id",q.nameOfKey]}),i=function(e,t){return n(l.scope,e,t)},r=function(e){var t;return(t=e.$alite_id)?t:t=e.$alite_id=W.utils.getId()},V=function(e){var t;return null!=(t=i(r,e))?a[t]:null},z=function(e){var t;null!=(t=e.$id)&&delete a[t]},function(e,t){var n;n=i(r,e),t.$id=n,a[n]=t}):window.Map?(a=new Map,V=function(e){return a.get(e)},z=function(e){a.delete(e.item)},function(e,t){a.set(e,t)}):(a={},V=function(e){var t;return"object"!=typeof e?a[e]||null:(t=e.$alite_id)?a[t]:null},z=function(e){var t;t=e.$id,a[t]&&(e.$id=null,delete a[t])},function(e,t){var n;"object"==typeof e?(n=W.utils.getId(),e.$alite_id=n,t.$id=n,a[n]=t):(t.$id=e,a[e]=t)}),o=[],R=function(e){var t,n;if("object"==(n=typeof e))return e&&e.length?e:[];if("number"===n)t=Math.floor(e);else if("string"===n&&(t=Math.floor(e),isNaN(t)))return[];if(t<o.length)o.length=t;else for(;o.length<t;)o.push(o.length);return o},q.element_list?function(e){var r,o,a,l,t,c,n,i,s,u,f,p,d,h,m,v,g,w,b,y,x,k,_,D,C,$,E,S,A,T,N,B,O,j,I,F,L;for(C=R(e),v=q.top_element,l=[],T=[],s=0,g=K.length;s<g;s++)(A=K[s]).active=!1;for(M=d=0,w=C.length;d<w;M=++d)f=C[M],(A=V(f))&&(A.active=!0);for(t=[],h=0,b=K.length;h<b;h++)if(!(A=K[h]).active){for(A.prev&&(A.prev.next=A.next),A.next&&(A.next.prev=A.prev),z(A),A.CD.destroy(),m=0,y=(I=A.element_list).length;m<y;m++)c=I[m],t.push(c);A.next=null,A.prev=null,A.element_list=null}for(j=null,O=!(r=[]),n=q.element_list.length-1,M=$=0,x=C.length;$<x;M=++$)if(f=C[M],A=V(p=f)){if(q.updateLocals(A.CD,f,M,C),A.prev===j){if(O)for(E=0,k=(F=A.element_list).length;E<k;E++)c=F[E],l.push({element:c,after:v}),v=c;v=(j=A).element_list[n],A.active=!0,T.push(A);continue}for((A.prev=j)&&(j.next=A),N=0,_=(L=A.element_list).length;N<_;N++)c=L[N],l.push({element:c,after:v}),v=c;O=!0,(j=A).active=!0,T.push(A)}else a=q.makeChild(p,M,C),i=function(){var e,t,n,i;for(i=[],t=0,e=(n=q.element_list).length;t<e;t++)o=n[t],c=o.cloneNode(!0),r.push({cd:a,el:c}),l.push({element:c,after:v}),i.push(v=c);return i}(),H(f,A={CD:a,element_list:i,prev:j,next:null,active:!0,item:f}),j?(S=j.next,((j.next=A).next=S)&&(S.prev=A)):0===M&&K[0]&&(S=K[0],(A.next=S).prev=A),j=A,T.push(A);for(K=T,q.rawUpdateDom(t,l),t.length=0,B=l.length=0,D=r.length;B<D;B++)u=r[B],W.bind(u.cd,u.el,{skip_attr:U,elementCanBeRemoved:P.attrName,noDomOptimization:!0})}:function(e){var t,n,i,r,o,a,l,c,s,u,f,p,d,h,m,v,g,w,b,y,x,k;for(v=R(e),p=q.top_element,D++,i=[],b=[],x=null,y=!(t=[]),M=a=0,d=v.length;a<d;M=++a)if(c=v[M],w=V(s=c)){if(q.updateLocals(w.CD,c,M,v),w.prev===x){y&&i.push({element:w.element,after:x.element}),p=(x=w).element,w.version=D,b.push(w);continue}(w.prev=x)&&(x.next=w),i.push({element:w.element,after:p}),y=!0,p=w.element,(x=w).version=D,b.push(w)}else n=q.makeChild(s,M,v),C=q.base_element.cloneNode(!0),null===_?(o=q.base_element.cloneNode(!0),k=W.bind(n,C,{skip_attr:U,elementCanBeRemoved:P.attrName,noDomOptimization:!0,fbElement:o}),(_=W.core.fastBinding(k)||!1)&&(q.base_element=o)):t.push({cd:n,el:C}),i.push({element:C,after:p}),H(c,w={CD:n,element:p=C,prev:x,next:null,version:D,item:c}),x?(g=x.next,((x.next=w).next=g)&&(g.prev=w)):0===M&&K[0]&&(g=K[0],(w.next=g).prev=w),x=w,b.push(w);for(r=[],u=0,h=K.length;u<h;u++)(w=K[u]).version!==D&&(w.prev&&(w.prev.next=w.next),w.next&&(w.next.prev=w.prev),z(w),w.CD.destroy(),r.push(w.element),w.next=null,w.prev=null,w.element=null);for(K=b,q.rawUpdateDom(r,i),r.length=0,f=i.length=0,m=t.length;f<m;f++)l=t[f],_?_.bind(l.cd,l.el):W.bind(l.cd,l.el,{skip_attr:U,elementCanBeRemoved:P.attrName,noDomOptimization:!0})});var i,r,_,o,R,M,a,z,V,H,K,U,D,n}})}},W.d.al.init=function(t,n,i,r){var o,a,e,l,c;W.option.removeAttribute&&(n.removeAttribute(r.attrName),r.fbElement&&r.fbElement.removeAttribute(r.attrName)),o=r.changeDetector,c=["$element"],"window"===r.attrArgument&&c.push("window");try{l=o.compile(i,{no_return:!0,input:c}),r.fastBinding=e=function(e,t,n,i){return l(i.changeDetector.locals,t,window)},e(0,n,0,r)}catch(e){a=e,W.exceptionHandler(a,"al-init, error in expression: "+i,{exp:i,scope:t,cd:o,element:n}),r.fastBinding=function(){}}},W.d.al.app={stopBinding:!0},W.d.al.stop={restrict:"AE",stopBinding:!0},W.d.al.cloak=function(e,t,n,i){t.removeAttribute(i.attrName),n&&ue.removeClass(t,n)},W.d.al.html={restrict:"AM",priority:100,modifier:{},link:function(r,o,a,l){var c;return l.elementCanBeRemoved&&8!==o.nodeType?(W.exceptionHandler(null,l.attrName+" can't control element because of "+l.elementCanBeRemoved,{scope:r,element:o,value:a,env:l}),{}):(l.stopBinding=!0,c={baseElement:null,topElement:null,activeElement:null,childCD:null,name:a,watchMode:null,start:function(){c.parsing(),c.prepare(),c.watchModel()},parsing:function(){var e,t,n,i;if(l.attrArgument)for(e=0,t=(i=l.attrArgument.split(".")).length;e<t;e++)"literal"!==(n=i[e])?"tpl"!==n?W.d.al.html.modifier[n]&&W.d.al.html.modifier[n](c,{scope:r,element:o,inputName:a,env:l}):c.watchMode="tpl":c.watchMode="literal"},prepare:function(){8===o.nodeType?(c.baseElement=null,c.topElement=o):(c.baseElement=o,c.topElement=document.createComment(" "+l.attrName+": "+a+" "),ue.before(o,c.topElement),ue.remove(o))},removeBlock:function(){var e,t,n,i;if(c.childCD&&(c.childCD.destroy(),c.childCD=null),c.activeElement){if(Array.isArray(c.activeElement))for(t=0,n=(i=c.activeElement).length;t<n;t++)e=i[t],c.removeDom(e);else c.removeDom(c.activeElement);c.activeElement=null}},insertBlock:function(e){var t,n,i;if(c.baseElement)c.activeElement=c.baseElement.cloneNode(!1),c.activeElement.innerHTML=e,c.insertDom(c.topElement,c.activeElement),c.childCD=l.changeDetector.new(),W.bind(c.childCD,c.activeElement,{skip_attr:l.skippedAttr(),elementCanBeRemoved:l.attrName});else for((i=document.createElement("body")).innerHTML=e,t=c.topElement,c.activeElement=[],c.childCD=l.changeDetector.new();n=i.firstChild;)c.insertDom(t,n),t=n,c.activeElement.push(n),W.bind(c.childCD,t,{skip_attr:l.skippedAttr(),elementCanBeRemoved:l.attrName})},updateDom:function(e){c.removeBlock(),e&&c.insertBlock(e)},removeDom:function(e){ue.remove(e)},insertDom:function(e,t){ue.after(e,t)},watchModel:function(){"literal"===c.watchMode?c.updateDom(c.name):"tpl"===c.watchMode?l.watchText(c.name,c.updateDom):l.watch(c.name,c.updateDom)}})}},W.d.al.html.modifier.id=function(i){return i.updateDom=function(e){var t,n;i.removeBlock(),(n=document.getElementById(e))&&(t=n.innerHTML)&&i.insertBlock(t)}},W.d.al.html.modifier.url=function(t){return t.loadHtml=function(e){ue.ajax(e)},t.updateDom=function(e){e?t.loadHtml({cache:!0,url:e,success:function(e){t.removeBlock(),t.insertBlock(e)},error:t.removeBlock}):t.removeBlock()}},W.d.al.html.modifier.scope=function(r,o){var e,a,l;if(2===(e=r.name.split(":")).length)r.name=e[0],l=e[1];else{if(e=r.name.match(/(.+)\:\s*\:\:([\d\w]+)$/))a=!0;else if(a=!1,!(e=r.name.match(/(.+)\:\s*([\.\w]+)$/)))throw"Wrong expression "+r.name;r.name=e[1],l=e[2]}return"outer",r.insertBlock=function(e){var t,n,i;r.activeElement=r.baseElement.cloneNode(!1),r.activeElement.innerHTML=e,r.insertDom(r.topElement,r.activeElement),n=o.env.changeDetector,(t=r.childCD=n.new(null,{locals:!0})).locals.outer=null,i=n.watch(l,function(e){return t.locals.outer=e},{oneTime:a}),r.childCD.watch("$destroy",function(){return i.stop()}),W.bind(r.childCD,r.activeElement,{skip_attr:o.env.skippedAttr()})}},W.d.al.html.modifier.inline=function(e,t){var n;return n=e.prepare,e.prepare=function(){return n(),t.env.setValue(e.name,e.baseElement.innerHTML)}},W.d.al.radio=function(e,t,n,i){var r,o,a;return r=i.takeAttr("al-value"),o=r?i.eval(r):i.takeAttr("value"),i.on(t,"change",function(){i.setValue(n,o),a.refresh(),i.scan()}),a=i.watch(n,function(e){return t.checked=o===e,"$scanNoChanges"})},window.Map?((le=function(){return this.idByItem=new Map,this.itemById={},this.index=1,this}).prototype.acquire=function(e){var t;return t="i"+this.index++,this.idByItem.set(e,t),this.itemById[t]=e,t},le.prototype.release=function(e){var t;t=this.itemById[e],delete this.itemById[e],this.idByItem.delete(t)},le.prototype.replace=function(e,t){var n;n=this.itemById[e],this.idByItem.delete(n),this.idByItem.set(t,e),this.itemById[e]=t},le.prototype.getId=function(e){return this.idByItem.get(e)},le.prototype.getItem=function(e){return this.itemById[e]||null}):((le=function(){return this.itemById={"i#null":null},this}).prototype.acquire=function(e){var t;return null===e?"i#null":("object"==typeof e?(t=e.$alite_id)||(e.$alite_id=t=W.utils.getId()):t=""+e,this.itemById[t]=e,t)},le.prototype.release=function(e){delete this.itemById[e]},le.prototype.replace=function(e,t){this.itemById[e]=t},le.prototype.getId=function(e){return null===e?"i#null":"object"==typeof e?e.$alite_id:""+e},le.prototype.getItem=function(e){return this.itemById[e]||null}),W.d.al.select=function(e,n,t,i){var r,o,a,l,c,s;return r=i.changeDetector.new(),i.stopBinding=!0,r.$select={mapper:a=new le},o=null,r.$select.change=function(){return W.nextTick(function(){return c(o)})},c=function(e){var t;return(t=a.getId(e))?n.value=t:n.selectedIndex=-1},s=r.watch(t,function(e){return c(o=e)}),l=function(e){return o=a.getItem(e.target.value),r.setValue(t,o),s.refresh(),r.scan()},i.on(n,"input",l),i.on(n,"change",l),W.bind(r,n,{skip_attr:i.skippedAttr()})},W.d.al.option=function(e,t,n,i){var r,o,a,l,c,s;for(r=s=i.changeDetector,a=0;a<=4&&!(c=s.$select);++a)s=s.parent||{};c?(l=c.mapper,o=null,r.watch(n,function(e){o?l.getId(e)!==o?(l.release(o),o=l.acquire(e),t.value=o,c.change()):l.replace(o,e):(o=l.acquire(e),t.value=o,c.change())}),r.watch("$destroy",function(){return l.release(o),c.change()})):W.exceptionHandler("","Error in al-option - al-select is not found",{cd:r,scope:r.scope,element:t,value:n})},W.hooks.attribute.unshift({code:"attribute",fn:function(){var e,t;(e=this.attrName.match(/^\:([\w\.\-]+)$/))&&("html"===(t=e[1]).split(".")[0]?(this.name="html",t=t.substring(5)):this.name="attr",this.ns="al",this.attrArgument=t)}}),ce={checked:"checked",readonly:"readOnly",value:"value",selected:"selected",muted:"muted",disabled:"disabled",hidden:"hidden"},W.d.al.attr=function(e,t,r,n){var o,a,i,l,c,s,u,f,p,d;if(n.attrArgument){if(i=n.attrArgument.split("."),a=i[0],u=ce[a],c=0<i.indexOf("tpl"),W.option.removeAttribute&&(t.removeAttribute(n.attrName),n.fbElement&&n.fbElement.removeAttribute(n.attrName)),o={readOnly:!0},f=null,"style"===a){if(!i[1])throw"Style is not declared";p=i[1].replace(/(-\w)/g,function(e){return e.substring(1).toUpperCase()}),f=function(e,t){return null==t&&(t=""),e.style[p]=t}}else"class"===a&&1<i.length?(c=!1,s=i.slice(1),f=function(e,t){var n,i,r,o,a;if(t)for(i=0,o=s.length;i<o;i++)n=s[i],ue.addClass(e,n);else for(r=0,a=s.length;r<a;r++)n=s[r],ue.removeClass(e,n)}):"focus"===a?f=function(e,t){return t?e.focus():e.blur()}:u?f=function(e,t){if(void 0===t&&(t=null),e[u]!==t)return e[u]=t}:(o.element=t,o.elementAttr=a);d=c?"watchText":"watch",(l=f?function(e,t,n,i){return i.changeDetector[d](r,function(e){return f(t,e)},o)}:function(e,t,n,i){return i.changeDetector[d](r,null,{readOnly:!0,element:t,elementAttr:a})})(e,t,r,n),n.fastBinding=l}},W.d.al.model=function(e,t,n,i){var r;if("select"===(r=t.nodeName.toLowerCase()))return W.d.al.select.call(this,e,t,n,i);if("input"===r){if("checkbox"===t.type)return W.d.al.checked.call(this,e,t,n,i);if("radio"===t.type)return W.d.al.radio.call(this,e,t,n,i)}return W.d.al.value.call(this,e,t,n,i)},W.filters.slice=function(e,t,n){return e?n?e.slice(t,n):e.slice(t):null},se=function(e){return e<10?"0"+e:""+e},W.filters.date=function(e,t){var n,i,r,o,a;if(!e)return"";for(o=t,i=0,r=(a=[[/yyyy/g,(e=new Date(e)).getFullYear()],[/mm/g,se(e.getMonth()+1)],[/dd/g,se(e.getDate())],[/HH/g,se(e.getHours())],[/MM/g,se(e.getMinutes())],[/SS/g,se(e.getSeconds())]]).length;i<r;i++)n=a[i],o=o.replace(n[0],n[1]);return o},W.filters.json={watchMode:"deep",fn:function(e){return JSON.stringify(W.utils.clone(e),null,4)}},W.filters.filter=function(e,t,n){var i,r,o,a,l,c,s,u,f,p,d;if(2===arguments.length)l=null,d=t;else{if(3!==arguments.length)return e;l=t,d=n}if(!e||null==d||""===d)return e;if(u=[],f=(""+d).toLowerCase(),l)for(r=0,c=e.length;r<c;r++)(i=e[r])[l]===d?u.push(i):0<=(""+i[l]).toLowerCase().indexOf(f)&&u.push(i);else for(o=0,s=e.length;o<s;o++)for(a in i=e[o])(p=i[a])===d?u.push(i):0<=(""+p).toLowerCase().indexOf(f)&&u.push(i);return u},W.filters.orderBy=function(e,n,i){return!e instanceof Array?null:(i=i?1:-1,e.sort(function(e,t){return e[n]<t[n]?-i:e[n]>t[n]?i:0}))},W.filters.throttle={init:function(e,t,n){var i;return t=Number(t),i=null,{onChange:function(e){return i&&clearTimeout(i),i=setTimeout(function(){return i=null,n.setValue(e),n.changeDetector.scan()},t)}}}},W.filters.toArray={init:function(e,t,r){var o,a,l;return l=2===r.conf.args.length?(o=r.conf.args[0],r.conf.args[1]):(o="key","value"),a=[],{watchMode:"deep",onChange:function(e){var t,n,i;for(n in a.length=0,e)i=e[n],(t={})[o]=n,t[l]=i,a.push(t);return r.setValue(a)}}}},W.filters.storeTo={init:function(e,t,n){return{onChange:function(e){return n.changeDetector.setValue(t,e),n.setValue(e)}}}},W.text["="]=function(e,t,n,i){var r;if((r=W.utils.compile.expression(t)).filters)throw"Conflict: bindonce and filters, use one-time binding";i.finally(r.fn(i.changeDetector.locals))},W.text["::"]=function(e,t,n,i){i.changeDetector.watch(t,function(e){return i.finally(e)},{oneTime:!0})},function(){var S=W.f$;function c(e){return e.replace(/(-\w)/g,function(e){return e.substring(1).toUpperCase()})}function A(e){var t,n=e.listener,i=e.childCD,r=e.name,o=e.parentName,a=e.parentCD,l={};if(r=c(r),n&&!0!==n)if(S.isFunction(n))t=n;else{if(t=n.onChange,"copy"===n||"copy"===n.watchMode)return void(t?t(o):i.scope[r]=o);"array"!==n&&"array"!==n.watchMode||(l.isArray=!0),"deep"!==n&&"deep"!==n.watchMode||(l.deep=!0)}t||(t=function(e){i.scope[r]=e,i.scan()}),a.watch(o,t,l)}W.component=function($,E){var e,t,n=$.match(/^(\w+)[\-](.+)$/);t=c(t=n?(e=n[1],n[2]):(e="$global",$)),W.d[e]||(W.d[e]={}),W.d[e][t]={restrict:"E",stopBinding:!0,priority:W.priority.$component,init:function(e,i,t,n){var r={$sendEvent:function(e,t){var n=new CustomEvent(e);n.value=t,n.component=!0,i.dispatchEvent(n)}},o=n.changeDetector.new(),a=W.ChangeDetector(r),l=new N({element:i,attributes:n.attributes,changeDetector:a,parentChangeDetector:o});try{var c=E.call(a,r,i,l)||{}}catch(e){return void W.exceptionHandler(e,"Error in component <"+$+">: ",{element:i,scope:r,cd:a})}c.onStart&&a.watch("$finishBinding",function(){c.onStart(),a.scan()});var s=!1;o.watch("$destroy",function(){s=!0,a.destroy()}),a.watch("$destroy",function(){c.onDestroy&&c.onDestroy(),s||o.destroy()});for(var u=0,f=i.attributes;u<f.length;u++){if("#"===(b=f[u]).name[0]){var p=b.name.slice(1);if(p){c.api?o.setValue(p,c.api):o.setValue(p,r);break}}}function d(e,t){var n=":"+e,i=l.takeAttr(n);if(!i){if(!(i=l.takeAttr(e)))return;t="copy"}A({childCD:a,listener:t,name:e,parentName:i,parentCD:o})}if(c.props)if(Array.isArray(c.props))for(var h=0,m=c.props;h<m.length;h++){d(v=m[h],!0)}else for(var v in c.props)d(v,c.props[v]);else for(var g=0,w=i.attributes;g<w.length;g++){var b,y=(b=w[g]).name,x=b.value;if(x){var k=y.match(/^\:(.*)$/);k&&A({childCD:a,name:k[1],parentName:x,parentCD:o})}}var _=!1;if(o.watch("$onScanOnce",function(){return _=!0}),c.template&&(i.innerHTML=c.template),c.templateId){var D=document.getElementById(c.templateId);if(!D)throw"No template "+c.templateId;i.innerHTML=D.innerHTML}function C(e){_||o.digest(),W.bind(a,i,{skip:!0})}c.templateUrl?S.ajax({url:c.templateUrl,cache:!0,success:function(e){i.innerHTML=e,C(!0)},error:function(){console.error("Template is not loaded",c.templateUrl)}}):C()}}}}(),W}var t=e();t.makeInstance=e,"function"==typeof alightInitCallback?alightInitCallback(t):"function"==typeof define?define(function(){return t}):"object"==typeof module&&"object"==typeof module.exports?module.exports=t:(t.option.globalController=!0,(window.alight=t).f$.ready(t.bootstrap))}()}(jQuery);